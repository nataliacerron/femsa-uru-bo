"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[9530],{99530:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r=t(1413),s=t(29439),a=t(52452),i=t(41930),o=t(93938),c=t(54696),l=t(96763),u=t(35477),d=t(95209),m=t(5019),f=t(50390),x=t(4743),p=t(10361),h=t(1314),Z=t(18369),v=t(33383),g=t(49360),j=t(94001),b=t(69126),y=t(30863),w=t(74165),k=t(15861),S=t(88669),P=t(82360),C=t(93693),N=(t(78449),t(31588)),_=t(34758),I=t(14476),A=t(62586),M=t(41627),E=t(62559);var F=function(e){var n=e.params,t=(0,x.I0)(),r=(0,Z.Gc)(),a=r.formState,o=r.watch,c=r.getValues,l=a.isValid,v=a.dirtyFields,g=(0,S.Z)(),j=(0,p.s0)(),y=o("image"),F=o("status"),D=(0,f.useState)({msg:"",alert:""}),O=(0,s.Z)(D,2),W=O[0],V=O[1],q=(0,f.useState)(!1),z=(0,s.Z)(q,2),B=z[0],Q=z[1],R=(0,f.useState)(),T=(0,s.Z)(R,2),U=(T[0],T[1]),G=(0,p.UO)().misionId,L=(0,N.cF)(),H=((0,x.v9)(_.dy),o("file_id"),(0,f.useState)(!1)),K=(0,s.Z)(H,2),J=K[0],X=K[1],Y=function(){var e=(0,k.Z)((0,w.Z)().mark((function e(){var n,r;return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c(),console.log("data a guardar: ",n),"0"===n.channel||"0"===n.gec||""===n.name||0===n.month||0===n.year||0===n.missions.length?V({msg:"Existen campos vac\xedos",alert:!1}):(X(!0),"new"===G?(void 0!==n.bonus&&""!==n.bonus||(n.bonus=0),t((0,b.cE)(n)).then((function(){console.log(" se guardo con exito"),j("/misions")}))):(void 0!==(r=Object.fromEntries(Object.entries(n).filter((function(e){return"updated_at"!==e[0]})))).bonus&&""!==r.bonus||(r.bonus=0),r.missions.forEach((function(e){e.points=parseInt(e.points),e.target=parseInt(e.target)})),console.log("guardar",r),t((0,b.mP)(r)).then((function(e){"fulfilled"===e.meta.requestStatus&&V(!0),"rejected"===e.meta.requestStatus&&V(!1),j("/misions")}))));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.useEffect)((function(){var e=(0,N.iH)(L,"files/bingo");(0,N.aF)(e).then((function(e){console.log(e,"res"),e.prefixes.forEach((function(e){console.log(e,"folderRef")})),e.items.forEach((function(e){console.log(e,"itemRef")}))})).catch((function(e){}))}),[]),(0,f.useEffect)((function(){if(void 0!==(null===y||void 0===y?void 0:y.name)){var e=new FileReader;e.addEventListener("load",(function(){U(e.result)})),e.readAsDataURL(y)}else U(y)}),[y]),(0,E.jsxs)("div",{className:"flex flex-col flex-1 w-full ",children:[(0,E.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,E.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,E.jsx)(d.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,E.jsxs)(u.Z,{className:"flex items-center sm:mb-12",component:h.rU,role:"button",to:"/misions",color:"inherit",children:[(0,E.jsx)(P.Z,{size:20,children:"ltr"===g.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,E.jsx)("span",{className:"flex mx-4 font-medium",children:"Misiones"})]})}),(0,E.jsx)("div",{className:"flex max-w-full",children:(0,E.jsxs)(d.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:"new"===n?"Nueva Misi\xf3n":"update"===n?"Actualizar Misi\xf3n":"Vista de Misi\xf3n"}),(0,E.jsx)(u.Z,{variant:"caption",className:"font-medium",children:"Detalle de la Misi\xf3n"})]})})]}),"view"!==G&&(0,E.jsxs)(d.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:[(0,E.jsx)(M.Z,{open:B,title:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar esta Mision?",onCancel:function(){Q(!1)},onConfirm:function(){var e=c();t((0,b.sE)(e.id)).then((function(){j("/misions")})),Q(!1)}}),"update"===G&&(0,E.jsx)(m.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:function(){Q(!0)},startIcon:(0,E.jsx)(P.Z,{className:"hidden sm:flex",children:"heroicons-outline:trash"}),children:"Eliminar"}),(0,E.jsx)(I.Z,{color:"secondary",onClick:function(){Y()},loading:J,loadingPosition:"start",startIcon:(0,E.jsx)(A.Z,{}),variant:"contained",disabled:"new"===G?i.Z.isEmpty(v)||!l:null,children:(0,E.jsx)("span",{children:"Guardar"})}),"update"===G&&"pendiente"===F&&(0,E.jsx)(m.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"success",onClick:function(){var e=c();delete e.updated_at,e.status="publicado",console.log("data",e),t((0,b.mP)(e)).then((function(e){"fulfilled"===e.meta.requestStatus&&V(!0),"rejected"===e.meta.requestStatus&&V(!1),j("/misions")}))},startIcon:(0,E.jsx)(P.Z,{className:"hidden sm:flex",children:"heroicons-outline:upload"}),children:"Publicar"}),"update"===G&&"publicado"===F&&(0,E.jsx)(m.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"error",onClick:function(){var e=c();delete e.updated_at,e.status="cancelado",t((0,b.mP)(e)).then((function(e){"fulfilled"===e.meta.requestStatus&&V(!0),"rejected"===e.meta.requestStatus&&V(!1),j("/misions")}))},startIcon:(0,E.jsx)(P.Z,{className:"hidden sm:flex",children:"heroicons-outline:x"}),children:"Cancelar"})]})]}),W.alert&&(0,E.jsx)(C.Z,{severity:"success",children:"Los datos se guardaron correctamente"}),!1===W.alert?(0,E.jsx)(C.Z,{severity:"error",children:W.msg}):null]})},D=t(93433),O=t(12066),W=t(25594),V=t(43965),q=t(31680),z=t(73413),B=t(67440),Q=(t(60606),t(95467)),R=t(87856),T=t(26759),U=t(95995),G=(t(7262),t(58217)),L=t(74268),H=t(70902),K=t(18201);var J=function(e){var n=e.params,t=(0,Z.Gc)(),a=t.control,i=t.formState,o=t.setValue,c=(i.errors,a._formValues),l=(c.name,c.month,c.year,c.channel,c.gec),d=c.missions,p=(c.bonus,(0,f.useState)(["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"])),h=(0,s.Z)(p,2),v=h[0],g=(h[1],(0,f.useState)([])),j=(0,s.Z)(g,2),b=j[0],y=j[1],S=(0,f.useState)("sku"),C=(0,s.Z)(S,2),N=C[0],_=C[1],I=(0,f.useState)(!0),A=(0,s.Z)(I,2),M=(A[0],A[1],(0,f.useState)()),F=(0,s.Z)(M,2),J=F[0],X=F[1],Y=(0,f.useState)(),$=(0,s.Z)(Y,2),ee=$[0],ne=$[1],te=(0,f.useState)([]),re=(0,s.Z)(te,2),se=re[0],ae=re[1],ie=(0,f.useState)([]),oe=(0,s.Z)(ie,2),ce=oe[0],le=oe[1],ue=(0,f.useState)([]),de=(0,s.Z)(ue,2),me=de[0],fe=de[1],xe=(0,f.useState)([]),pe=(0,s.Z)(xe,2),he=pe[0],Ze=pe[1],ve=(0,f.useState)(""),ge=(0,s.Z)(ve,2),je=(ge[0],ge[1]),be=(0,f.useState)(!1),ye=(0,s.Z)(be,2),we=ye[0],ke=ye[1],Se=(0,f.useState)([]),Pe=(0,s.Z)(Se,2),Ce=Pe[0],Ne=Pe[1],_e=(0,f.useState)(!1),Ie=(0,s.Z)(_e,2),Ae=Ie[0],Me=Ie[1],Ee=(0,f.useState)(ce),Fe=(0,s.Z)(Ee,2),De=Fe[0],Oe=Fe[1],We=(0,f.useState)([]),Ve=(0,s.Z)(We,2),qe=(Ve[0],Ve[1],(0,f.useState)(!1)),ze=(0,s.Z)(qe,2),Be=ze[0],Qe=ze[1],Re=(0,x.I0)(),Te=(0,f.useState)({cmd:"sku",label:"",instructions:"",img:"",skus:[],target:"",points:"",brand:[]}),Ue=(0,s.Z)(Te,2),Ge=Ue[0],Le=Ue[1],He={PaperProps:{style:{maxHeight:221,width:300}}};(0,f.useEffect)((function(){for(var e=(new Date).getFullYear(),n=[],t=0;t<5;t++)n.push(e+t);y(n)}),[]),(0,f.useEffect)((function(){Re((0,R.vp)()).then((function(e){ae(e.payload.sort((function(e,n){return e.brand.localeCompare(n.brand)})))})),Re((0,R.Xp)()).then((function(e){console.log("products",e.payload),le(e.payload.sort((function(e,n){return e.sku>n.sku?1:-1}))),Oe(e.payload.sort((function(e,n){return e.sku>n.sku?1:-1})))})),Re((0,R.ng)()).then((function(e){X(e.payload.channels)}))}),[Re]),(0,f.useEffect)((function(){fe(d)}),[d]),(0,f.useEffect)((function(){if(a._formValues.channel&&J.length>=1){var e=J.find((function(e){return e.canal===a._formValues.channel}));console.log("gec",l),ne(e.gec)}}),[J]),(0,f.useEffect)((function(){o("missions",me,{shouldDirty:!0,shouldValidate:!0})}),[he]);var Ke=function(){var e=(0,k.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je(n),ke(!0);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Je=function(){var e=(0,k.Z)((0,w.Z)().mark((function e(n){return(0,w.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne([]);case 2:e.prev=2,e.t0=n.target.value,e.next=1===e.t0?6:2===e.t0?9:3===e.t0?12:15;break;case 6:return e.next=8,(0,T.QO)("images/logos_con_fondo",Ne);case 8:return e.abrupt("break",22);case 9:return e.next=11,(0,T.QO)("images/logos_sin_fondo",Ne);case 11:return e.abrupt("break",22);case 12:return e.next=14,(0,T.QO)("images/empaques",Ne);case 14:return e.abrupt("break",22);case 15:return e.next=17,(0,T.QO)("images/logos_con_fondo",Ne);case 17:return e.next=19,(0,T.QO)("images/logos_sin_fondo",Ne);case 19:return e.next=21,(0,T.QO)("images/empaques",Ne);case 21:return e.abrupt("break",22);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(2),console.error(e.t1);case 27:return e.prev=27,Qe(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(n){return e.apply(this,arguments)}}(),Xe=function(e){fe(me.filter((function(n,t){return t!==e}))),Ze(me.filter((function(n,t){return t!==e})))};return we?(0,E.jsxs)(W.ZP,{container:!0,padding:5,rowSpacing:2,columnSpacing:{xs:1,sm:1,md:3},children:[(0,E.jsx)(W.ZP,{item:!0,xs:12,children:(0,E.jsx)(u.Z,{className:"text-16 sm:text-20 truncate font-bold",children:"Seleccionar imagen"})}),(0,E.jsx)(W.ZP,{item:!0,xs:12,children:(0,E.jsxs)(V.Z,{id:"selectImg",variant:"outlined",fullWidth:!0,onChange:function(e){Qe(!0),Je(e)},defaultValue:-1,children:[(0,E.jsx)(q.Z,{value:-1,disabled:!0,children:" Seleccione una Categoria"},3),(0,E.jsx)(q.Z,{value:0,children:" Todas"},0),(0,E.jsx)(q.Z,{value:1,children:" Imagenes con Fondo"},1),(0,E.jsx)(q.Z,{value:2,children:" Imagenes sin Fondo"},2),(0,E.jsx)(q.Z,{value:3,children:" Empaques"},4)]})}),Be?(0,E.jsx)(W.ZP,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"30vh",width:"100vw"},children:(0,E.jsx)(K.Z,{})}):Ce.map((function(e,n){return(0,E.jsx)(W.ZP,{item:!0,xs:6,md:2,textAlign:"center",children:(0,E.jsx)("img",{className:"rounded",src:e,onClick:function(e){!function(e){Le((0,r.Z)((0,r.Z)({},Ge),{},{img:e.target.src})),Me(!0)}(e),ke(!1)},alt:"el"})},n)}))]}):(0,E.jsxs)("div",{className:"ml-10",children:[(0,E.jsxs)(W.ZP,{container:!0,padding:2,rowSpacing:3,columnSpacing:{xs:1,sm:1,md:4},alignItems:"center",textAlign:"center",children:[(0,E.jsxs)(W.ZP,{item:!0,xs:6,md:3,children:[(0,E.jsx)(u.Z,{className:"text-14 sm:text-16 truncate font-semibold",children:"Nombre"}),(0,E.jsx)(Z.Qr,{name:"name",control:a,render:function(e){var t=e.field;return(0,E.jsx)(O.Z,(0,r.Z)((0,r.Z)({required:!0},t),{},{autoFocus:!0,placeholder:"Ingrese el Nombre",id:"name",variant:"outlined",fullWidth:!0,disabled:"view"===n}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:6,md:2,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Mes"}),(0,E.jsx)(Z.Qr,{name:"month",control:a,render:function(e){var t=e.field;return(0,E.jsxs)(V.Z,(0,r.Z)((0,r.Z)({},t),{},{id:"month",value:t.value||0,variant:"outlined",fullWidth:!0,disabled:"view"===n,children:[(0,E.jsx)(q.Z,{value:0,children:" Seleccione un Mes"},0),null===v||void 0===v?void 0:v.map((function(e,n){return(0,E.jsxs)(q.Z,{value:n+1,children:[" ",e]},n+1)}))]}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:6,md:2,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"A\xf1o"}),(0,E.jsx)(Z.Qr,{name:"year",control:a,render:function(e){var t=e.field;return(0,E.jsxs)(V.Z,(0,r.Z)((0,r.Z)({},t),{},{id:"year",value:t.value||0,variant:"outlined",fullWidth:!0,disabled:"view"===n,children:[(0,E.jsx)(q.Z,{value:0,children:" Seleccione un A\xf1o"},0),null===b||void 0===b?void 0:b.map((function(e,n){return(0,E.jsxs)(q.Z,{value:e,children:[" ",e]},n)}))]}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:2.5,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Canal"}),(0,E.jsx)(Z.Qr,{name:"channel",control:a,render:function(e){var t=e.field;return(0,E.jsxs)(V.Z,(0,r.Z)((0,r.Z)({},t),{},{id:"channel",value:t.value||"0",variant:"outlined",fullWidth:!0,disabled:"view"===n,onChange:function(e){var n=e.target.value;t.onChange(n),function(e){var n=J.find((function(n){return n.canal===e.target.value}));ne(n.gec)}(e)},children:[(0,E.jsx)(q.Z,{value:"0",children:" Seleccione un Canal"}),null===J||void 0===J?void 0:J.map((function(e,n){return(0,E.jsxs)(q.Z,{value:e.canal,children:[" ",e.canal]},n)}))]}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:2.5,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"GEC"}),(0,E.jsx)(Z.Qr,{name:"gec",control:a,render:function(e){var t=e.field;return(0,E.jsxs)(V.Z,(0,r.Z)((0,r.Z)({},t),{},{id:"gec",value:t.value||"0",variant:"outlined",fullWidth:!0,disabled:"view"===n,children:[(0,E.jsx)(q.Z,{value:"0",children:" Seleccione un GEC"}),null===ee||void 0===ee?void 0:ee.map((function(e,n){return(0,E.jsxs)(q.Z,{value:e,children:[" ",e]},n)}))]}))}})]})]}),"view"!==n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(W.ZP,{container:!0,padding:2,rowSpacing:1,columnSpacing:{xs:1,sm:1,md:1},alignItems:"center",textAlign:"center",children:(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:1.7,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Tipo"}),(0,E.jsxs)(z.Z,{value:N,exclusive:!0,onChange:function(e){Le({cmd:"",label:"",instructions:"",img:"",skus:[],target:"",points:"",brand:[]}),_(e.target.value),Le((0,r.Z)((0,r.Z)({},Ge),{},{cmd:e.target.value})),Me(!1)},"aria-label":"channel or client",id:"type",children:[(0,E.jsx)(B.Z,{value:"photo","aria-label":"Foto",children:"Foto"}),(0,E.jsx)(B.Z,{value:"sku","aria-label":"Producto",children:"Producto"})]})]})}),(0,E.jsxs)(W.ZP,{container:!0,padding:2,rowSpacing:1,columnSpacing:{xs:1,sm:1,md:1},alignItems:"center",textAlign:"center",children:["sku"===N?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:1.5,display:"grid",justifyItems:"center",alignItems:"center",children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold"}),(0,E.jsx)(m.Z,{className:"text-10 mt-20",variant:"contained",component:"label",color:"primary",onClick:function(){return Ke({propertyName:"header"})},children:" Cargar Imagen"}),Ae&&(0,E.jsx)("img",{width:"60%",className:"rounded",alignItems:"center",src:Ge.img})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:2,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Label"}),(0,E.jsx)(O.Z,{value:Ge.label,onChange:function(e){return Le((0,r.Z)((0,r.Z)({},Ge),{},{label:e.target.value}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:2.5,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Marcas"}),(0,E.jsx)(V.Z,{labelId:"marca-multiple-checkbox-label",multiple:!0,value:Ge.brand,onChange:function(e){return function(e){var n=e.target.value;Le((0,r.Z)((0,r.Z)({},Ge),{},{brand:"string"===typeof n?n.split(","):n}));var t=[];console.log("value",n),t=0===n.length?ce:ce.filter((function(e){return n.includes(e.brand)})),Oe(t)}(e)},input:(0,E.jsx)(G.Z,{}),renderValue:function(e){return e.join(", ")},MenuProps:He,label:"Sku",fullWidth:!0,children:se.map((function(e){return(0,E.jsxs)(q.Z,{value:e.brand,children:[(0,E.jsx)(L.Z,{checked:Ge.brand.indexOf(e.brand)>-1}),(0,E.jsx)(H.Z,{primary:e.brand})]},e.id)}))})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:3,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"SKUs"}),(0,E.jsx)(V.Z,{multiple:!0,value:Ge.skus||0,onChange:function(e){return function(e){var n=e.target.value;console.log("testttt",n),Le((0,r.Z)((0,r.Z)({},Ge),{},{skus:"string"===typeof n?n.split(","):n}))}(e)},input:(0,E.jsx)(G.Z,{}),renderValue:function(e){return e.join(", ")},MenuProps:He,label:"Sku",fullWidth:!0,children:De.map((function(e){return(0,E.jsxs)(q.Z,{style:{width:100},value:e.sku,children:[(0,E.jsx)(L.Z,{checked:Ge.skus.indexOf(e.sku)>-1}),(0,E.jsx)(H.Z,{className:"text-10 sm:text-8",primary:e.sku+" - "+e.description})]},e.sku)}))})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:1,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Objetivo"}),(0,E.jsx)(O.Z,{value:Ge.target,inputProps:{inputMode:"numeric"},onChange:function(e){return Le((0,r.Z)((0,r.Z)({},Ge),{},{target:parseInt(e.target.value)}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:1,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Puntos"}),(0,E.jsx)(O.Z,{value:Ge.points,inputProps:{inputMode:"numeric"},onChange:function(e){return Le((0,r.Z)((0,r.Z)({},Ge),{},{points:parseInt(e.target.value)}))}})]})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:4,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Label"}),(0,E.jsx)(O.Z,{fullWidth:!0,value:Ge.label,onChange:function(e){return Le((0,r.Z)((0,r.Z)({},Ge),{},{label:e.target.value}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:6,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Descripci\xf3n"}),(0,E.jsx)(O.Z,{fullWidth:!0,value:Ge.instructions,onChange:function(e){return Le((0,r.Z)((0,r.Z)({},Ge),{},{instructions:e.target.value}))}})]}),(0,E.jsxs)(W.ZP,{item:!0,xs:4,md:1,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Puntos"}),(0,E.jsx)(O.Z,{value:Ge.points,inputProps:{inputMode:"numeric"},onChange:function(e){return Le((0,r.Z)((0,r.Z)({},Ge),{},{points:parseInt(e.target.value)}))}})]})]}),(0,E.jsx)(W.ZP,{item:!0,xs:4,md:1,children:(0,E.jsx)(Q.Z,{"aria-label":"Agregar",type:"button",onClick:function(){return function(){var e=Ge;e.cmd=N,0!==e.skus.length&&(me?(fe([].concat((0,D.Z)(me),[e])),Ze([].concat((0,D.Z)(me),[e]))):(fe([e]),Ze([e])),Le({cmd:"",label:"",instructions:"",img:"",skus:[],target:"",points:"",brand:[]}),Me(!1),Oe(ce))}()},className:"mt-20",children:(0,E.jsx)(P.Z,{size:26,color:"primary",children:"heroicons-outline:plus-circle"})})})]})]}),(0,E.jsx)(U.Z,{}),null===me||void 0===me?void 0:me.map((function(e,t){return(0,E.jsx)("div",{children:(0,E.jsx)(W.ZP,{container:!0,padding:2,rowSpacing:1,columnSpacing:{xs:1,sm:1,md:1},alignItems:"center",textAlign:"center",justify:"center",children:"sku"===e.cmd?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(W.ZP,{item:!0,xs:6,md:1,style:{display:"flex",justifyContent:"center"},children:(0,E.jsx)("img",{width:"70%",src:e.img,alt:"item"})}),(0,E.jsx)(W.ZP,{item:!0,xs:6,md:4,children:(0,E.jsx)(O.Z,{disabled:!0,fullWidth:!0,label:"Label",value:e.label})}),(0,E.jsx)(W.ZP,{item:!0,xs:6,md:4,children:(0,E.jsx)(O.Z,{disabled:!0,fullWidth:!0,label:"SKUs",value:e.skus})}),(0,E.jsx)(W.ZP,{item:!0,xs:6,md:1,children:(0,E.jsx)(O.Z,{fullWidth:!0,label:"Objetivo",value:e.target,onChange:function(e){return function(e,n){var t=(0,D.Z)(me);t[n].target=e.target.value,console.log("update",t),fe(t)}(e,t)}})}),(0,E.jsx)(W.ZP,{item:!0,xs:6,md:1,children:(0,E.jsx)(O.Z,{fullWidth:!0,label:"Puntos",value:e.points,onChange:function(e){return function(e,n){var t=(0,D.Z)(me);t[n].points=e.target.value,console.log("update",t),fe(t)}(e,t)}})}),"view"!==n&&(0,E.jsx)(W.ZP,{item:!0,xs:6,md:1,children:(0,E.jsx)(Q.Z,{"aria-label":"Agregar",type:"button",onClick:function(){return Xe(t)},children:(0,E.jsx)(P.Z,{size:26,color:"error",children:"heroicons-outline:trash"})})})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(W.ZP,{item:!0,xs:6,md:4,children:(0,E.jsx)(O.Z,{fullWidth:!0,disabled:!0,label:"Label",value:e.label})}),(0,E.jsx)(W.ZP,{item:!0,xs:6,md:6,children:(0,E.jsx)(O.Z,{fullWidth:!0,disabled:!0,label:"Descripcion",value:e.instructions})}),(0,E.jsx)(W.ZP,{item:!0,xs:6,md:1,children:(0,E.jsx)(O.Z,{fullWidth:!0,disabled:!0,label:"Puntos",value:e.points})}),"view"!==n&&(0,E.jsx)(W.ZP,{item:!0,xs:6,md:1,children:(0,E.jsx)(Q.Z,{"aria-label":"Agregar",type:"button",onClick:function(){return Xe(t)},children:(0,E.jsx)(P.Z,{size:26,color:"error",children:"heroicons-outline:trash"})})})]})})},e.id)})),(0,E.jsx)(U.Z,{}),(0,E.jsx)(W.ZP,{container:!0,padding:2,rowSpacing:1,columnSpacing:{xs:1,sm:1,md:3},alignItems:"center",justify:"center",children:(0,E.jsxs)(W.ZP,{item:!0,xs:6,md:5,children:[(0,E.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Bonus (En caso de completar las misiones)"}),(0,E.jsx)(Z.Qr,{name:"bonus",control:a,render:function(e){var t=e.field;return(0,E.jsx)(O.Z,(0,r.Z)((0,r.Z)({className:" mb-16"},t),{},{inputProps:{inputMode:"numeric"},placeholder:"Ingrese Bonus",id:"bonus",variant:"outlined",defaultValue:0,fullWidth:!0,disabled:"view"===n,onChange:function(e){if(""!==e.target.value){var n=parseInt(e.target.value);t.onChange(n)}else t.onChange("")}}))}})]})})]})},X=g.Ry().shape({channel:g.Z_().required("Debe seleccionar un Canal"),gec:g.Z_().required("Debe seleccionar un GEC"),year:g.Z_().required("Debe seleccionar un Ano"),name:g.Z_().required("Debe ingresar un Nombre"),month:g.Z_().required("Debe ingresar un mes"),missions:g.IX().min(1,"Debe tener al menos una misi\xf3n asignada")});var Y=(0,c.Z)("misionsApp",y.Z)((function(e){var n=(0,x.I0)(),t=(0,x.v9)(b.IR),c=(0,j.Z)((function(e){return e.breakpoints.down("lg")})),g=(0,p.UO)(),y=(0,f.useState)(!1),w=(0,s.Z)(y,2),k=w[0],S=w[1],P=(0,Z.cI)({mode:"onChange",defaultValues:{deleted:!1,missions:[]},resolver:(0,v.X)(X)}),C=P.reset,N=P.watch,_=(P.control,P.onChange,P.formState,N()),I=(0,p.TH)();return(0,l.KW)((function(){!function(){var e=g.misionId;n("new"===e?(0,b.aZ)():(0,b.xQ)(I.state))}()}),[n,g,I]),(0,f.useEffect)((function(){t&&C(t)}),[t,C]),(0,f.useEffect)((function(){return function(){n((0,b.C3)()),S(!1)}}),[n]),k?(0,E.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,E.jsx)(u.Z,{color:"text.secondary",variant:"h5",children:"No hay Misiones"}),(0,E.jsx)(m.Z,{className:"mt-24",component:h.rU,variant:"outlined",to:"/misions",color:"inherit",children:"Volver a Misiones"})]}):i.Z.isEmpty(_)||t&&g.misionId!==t.id&&"new"!==g.misionId&&"update"!==g.misionId&&"view"!==g.misionId?(0,E.jsx)(a.Z,{}):(0,E.jsx)(Z.RV,(0,r.Z)((0,r.Z)({},P),{},{children:(0,E.jsx)(o.Z,{header:(0,E.jsx)(F,{params:g.misionId}),content:(0,E.jsx)(J,{params:g.misionId}),scroll:c?"normal":"content"})}))}))},30863:function(e,n,t){var r=t(48028),s=t(87856),a=t(69126),i=(0,r.UY)({misions:s.ZP,mision:a.ZP});n.Z=i},69126:function(e,n,t){t.d(n,{$o:function(){return p},C3:function(){return v},IR:function(){return b},aZ:function(){return g},cE:function(){return m},mP:function(){return f},sE:function(){return x},xQ:function(){return j}});var r,s=t(4942),a=t(1413),i=t(74165),o=t(15861),c=t(97744),l=t(45133),u=t.n(l),d=t(90326),m=(0,c.hg)("misionsApp/mision/addMision",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("misionData a guardar",n),e.next=4,u().post(d._n+d.pc+"/back/monthly_missions",n,{headers:{Authorization:d.o3}});case 4:return r=e.sent,e.next=7,r.data;case 7:return s=e.sent,console.log("dataaaaaa",s),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),f=(0,c.hg)("misionsApp/mision/updateMision",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("misionData",n),e.next=4,u().put(d._n+d.pc+"/back/monthly_missions/".concat(n.id),(0,a.Z)({},n),{headers:{Authorization:d.o3}});case 4:return r=e.sent,e.next=7,r.data;case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),x=((0,c.hg)("misionsApp/mision/addFile",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("fileeeeeeeeeeeee",n),e.next=4,u().post(d._n+d.pc+"/back/files",n,{headers:{Authorization:d.o3}});case 4:return r=e.sent,e.next=7,r.data;case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),(0,c.hg)("misionsApp/mision/removeMision",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("deleteeeeeee",n),e.next=4,u().delete(d._n+d.pc+"/back/monthly_missions/".concat(n),{headers:{Authorization:d.o3}});case 4:return e.abrupt("return",id);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())),p=(0,c.hg)("misionsApp/mision/getOneMision",function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("vaaaal",n),e.next=4,u().get(d._n+d.pc+"/back/monthly_missions/".concat(n.id),{headers:{Authorization:d.o3}});case 4:return r=e.sent,e.next=7,r.data;case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),h=(0,c.oM)({name:"misionsApp/mision",initialState:{mision:{deleted:!1,missions:[]}},reducers:{resetMision:function(){return null},newMision:{reducer:function(e,n){return n.payload},prepare:function(e){return{payload:{deleted:!1,missions:[]}}}},setMision:{reducer:function(e,n){return n.payload}}},extraReducers:(r={},(0,s.Z)(r,m.fulfilled,(function(e,n){return n.payload})),(0,s.Z)(r,f.fulfilled,(function(e,n){return n.payload})),(0,s.Z)(r,x.fulfilled,(function(e,n){return n.payload})),(0,s.Z)(r,p.fulfilled,(function(e,n){return n.payload})),r)}),Z=h.actions,v=Z.resetMision,g=Z.newMision,j=Z.setMision,b=function(e){return e.misionsApp.mision};n.ZP=h.reducer},87856:function(e,n,t){t.d(n,{C3:function(){return d},Xp:function(){return f},dk:function(){return g},lv:function(){return j},ng:function(){return x},sl:function(){return Z},vp:function(){return m}});var r,s=t(4942),a=t(74165),i=t(15861),o=t(97744),c=t(45133),l=t.n(c),u=t(90326),d=(0,o.hg)("misionsApp/getMisions",(0,i.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/monthly_missions",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return(t=e.sent).sort((function(e,n){return new Date(n.updated_at)-new Date(e.updated_at)})),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))),m=(0,o.hg)("misionsApp/getBrands",(0,i.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/brands",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),f=(0,o.hg)("misionsApp/getProducts",(0,i.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/products",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),x=(0,o.hg)("misionsApp/getVariables",(0,i.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/variables",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),p=(0,o.HF)({}),h=p.getSelectors((function(e){return e.misionsApp.misions})),Z=h.selectAll,v=(h.selectById,(0,o.oM)({name:"misionsApp",initialState:p.getInitialState({searchText:"",variables:[]}),reducers:{setMisionsSearchText:{reducer:function(e,n){e.searchText=n.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(r={},(0,s.Z)(r,d.fulfilled,p.setAll),(0,s.Z)(r,x.fulfilled,(function(e,n){e.variables=n.payload})),r)})),g=v.actions.setMisionsSearchText,j=function(e){return e.misionsApp.misions.searchText};n.ZP=v.reducer},41627:function(e,n,t){t(50390);var r=t(54982),s=t(78426),a=t(93085),i=t(7887),o=t(5019),c=t(62559);n.Z=function(e){var n=e.open,t=e.title,l=e.message,u=e.onCancel,d=e.onConfirm;return(0,c.jsxs)(r.Z,{open:n,onClose:u,children:[(0,c.jsx)(s.Z,{children:t}),(0,c.jsx)(a.Z,{children:l}),(0,c.jsxs)(i.Z,{children:[(0,c.jsx)(o.Z,{onClick:u,children:"Cancelar"}),(0,c.jsx)(o.Z,{onClick:d,color:"error",children:"Eliminar"})]})]})}},78449:function(e,n,t){t.d(n,{DB:function(){return c},ni:function(){return l},sS:function(){return u},wf:function(){return o}});var r=t(74165),s=t(15861),a=t(31588),i=t(26759),o=function(){var e=new Date,n=e.getFullYear(),t=e.getMonth()+1;return[e.getDate(),t,n].join("_")},c=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.entries(n).map(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("img_brief"!==t[0]&&"img_description"!==t[0]||!t[1].name){e.next=8;break}return s=o(),c=(0,a.iH)(i.tO,"coupons/".concat(t[1].name+"_"+s)),e.next=5,(0,a.KV)(c,t[1]);case 5:return e.next=7,(0,a.Jt)(c);case 7:n[t[0]]=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,t){var s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name){e.next=8;break}return s=o(),c=(0,a.iH)(i.tO,"sliders/".concat(t.name+"_"+s)),e.next=5,(0,a.KV)(c,t);case 5:return e.next=7,(0,a.Jt)(c);case 7:n.image=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),u=function(e,n){if(0==e)return"0 Bytes";var t=n||2,r=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,r)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}}}]);
//# sourceMappingURL=9530.ef68e33f.chunk.js.map