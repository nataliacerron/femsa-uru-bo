"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[1835],{81835:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var i=n(93938),r=n(54696),a=n(94001),o=n(73758),c=n(5019),s=n(4930),l=n(46981),u=n(35477),d=n(95209),f=n(4743),p=n(1314),h=n(82360),x=n(9763),m=n(62559);var g=function(e){var t=(0,f.I0)(),n=(0,f.v9)(x.je);return(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-16 sm:space-y-0 flex-1 w-full items-center justify-between py-32 px-24 md:px-32",children:[(0,m.jsx)(u.Z,{component:d.E.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 md:text-32 font-extrabold tracking-tight",children:"Notificaciones"}),(0,m.jsxs)("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row space-y-16 sm:space-y-0 flex-1 items-center justify-end space-x-8",children:[(0,m.jsxs)(l.Z,{component:d.E.div,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex items-center w-full sm:max-w-256 space-x-8 px-16 rounded-full border-1 shadow-0",children:[(0,m.jsx)(h.Z,{color:"disabled",children:"heroicons-solid:search"}),(0,m.jsx)(s.Z,{placeholder:"Busqueda de notificaciones",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:n,inputProps:{"aria-label":"Search"},onChange:function(e){return t((0,x.ks)(e))}})]}),(0,m.jsx)(d.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.2}},children:(0,m.jsx)(c.Z,{className:"",component:p.rU,to:"/notifications/new",variant:"contained",color:"secondary",startIcon:(0,m.jsx)(h.Z,{children:"heroicons-outline:plus"}),children:"Agregar"})})," "]})]})},Z=n(74165),b=n(1413),v=n(15861),j=n(29439),w=n(34062),y=n(41930),N=n(4182),k=n(35044),P=n(73481),S=n(1769),A=n(29399),C=n(50390),I=n(24115),_=n(52452),z=n(58531),T=n(94187),E=n(77555),D=n(64604),H=[{id:"img",align:"left",disablePadding:!1,label:"Imagen",sort:!0},{id:"title",align:"left",disablePadding:!1,label:"Titulo",sort:!0},{id:"description",align:"left",disablePadding:!1,label:"Descripcion",sort:!0},{id:"due",align:"left",disablePadding:!1,label:"Vencimiento",sort:!0},{id:"channel",align:"left",disablePadding:!1,label:"Canal",sort:!0},{id:"gec",align:"left",disablePadding:!1,label:"GEC",sort:!0},{id:"enabled",align:"left",disablePadding:!1,label:"Habilitado",sort:!0},{id:"actions",align:"left",disablePadding:!1,label:"Acciones",sort:!0}];var B=function(e){e.selectedNotificationIds.length;var t=(0,C.useState)(null),n=(0,j.Z)(t,2);return n[0],n[1],(0,f.I0)(),(0,m.jsx)(E.Z,{children:(0,m.jsx)(A.Z,{className:"h-48 sm:h-64",children:H.map((function(t){return(0,m.jsx)(P.Z,{sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,D.$n)(e.palette.background.default,.4):(0,D.$n)(e.palette.background.default,.02)}},className:"p-4 md:p-16",align:t.align,padding:t.disablePadding?"none":"normal",sortDirection:e.order.id===t.id&&e.order.direction,children:t.sort&&(0,m.jsx)(T.Z,{title:"Sort",placement:"right"===t.align?"bottom-end":"bottom-start",enterDelay:300,children:(0,m.jsx)(z.Z,{active:e.order.id===t.id,direction:e.order.direction,onClick:(n=t.id,function(t){e.onRequestSort(t,n)}),className:"font-semibold",children:t.label})})},t.id);var n}),this)})})},M=n(60606),R=n.n(M);var Y=(0,I.Z)((function(e){var t=(0,f.I0)(),n=(0,f.v9)(x._6),i=(0,f.v9)(x.je),r=(0,C.useState)(!0),a=(0,j.Z)(r,2),o=a[0],s=a[1],l=(0,C.useState)([]),p=(0,j.Z)(l,2),g=p[0],I=p[1],z=(0,C.useState)(n),E=(0,j.Z)(z,2),D=E[0],H=E[1],M=(0,C.useState)(0),Y=(0,j.Z)(M,2),V=Y[0],q=Y[1],F=(0,C.useState)(10),U=(0,j.Z)(F,2),L=U[0],$=U[1],G=(0,C.useState)({direction:"asc",id:null}),J=(0,j.Z)(G,2),W=J[0],K=J[1];function O(){return(O=(0,v.Z)((0,Z.Z)().mark((function t(n){return(0,Z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("item",n),t.next=3,e.navigate("update",{state:(0,b.Z)({},n)});case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(){return(Q=(0,v.Z)((0,Z.Z)().mark((function t(n){return(0,Z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.navigate("view",{state:(0,b.Z)({},n)});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,C.useEffect)((function(){t((0,x.TH)()).then((function(e){s(!1)}))}),[t]),(0,C.useEffect)((function(){0!==i.length?(H(y.Z.filter(n,(function(e){return e.title.toLowerCase().includes(i.toLowerCase())}))),q(0)):H(n)}),[n,i]),o?(0,m.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,m.jsx)(_.Z,{})}):0===D.length?(0,m.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-1 items-center justify-center h-full",children:(0,m.jsx)(u.Z,{color:"text.secondary",variant:"h5",children:"No se encontraron Notifications"})}):(0,m.jsxs)("div",{className:"w-full flex flex-col min-h-full",children:[(0,m.jsx)(w.Z,{className:"grow overflow-x-auto",children:(0,m.jsxs)(N.Z,{stickyHeader:!0,className:"min-w-xl","aria-labelledby":"tableTitle",children:[(0,m.jsx)(B,{selectedNotificationIds:g,order:W,onSelectAllClick:function(e){e.target.checked?I(D.map((function(e){return e.id}))):I([])},onRequestSort:function(e,t){var n=t,i="desc";W.id===t&&"desc"===W.direction&&(i="asc"),K({direction:i,id:n})},rowCount:D.length,onMenuItemClick:function(){I([])}}),(0,m.jsx)(k.Z,{children:y.Z.orderBy(D,[function(e){return e[W.id]}],[W.direction]).slice(V*L,V*L+L).map((function(e){return(0,m.jsxs)(A.Z,{className:"h-64 cursor-pointer",hover:!0,children:[(0,m.jsx)(P.Z,{component:"th",scope:"row",padding:"none",children:(0,m.jsx)("img",{width:100,className:"rounded m-10",src:e.img,alt:e.id,style:{objectFit:"contain",maxHeight:"60px"}})}),(0,m.jsx)(P.Z,{className:"p-4 md:p-16 ",component:"th",scope:"row",children:e.title.length>30?"".concat(e.title.substring(0,20),"..."):e.title}),(0,m.jsx)(P.Z,{className:"p-4 md:p-16 ",component:"th",scope:"row",children:e.description.length>20?"".concat(e.description.substring(0,20),"..."):e.description}),(0,m.jsx)(P.Z,{className:"p-4 md:p-16 ",component:"th",scope:"row",children:R()(e.due_date).format("DD-MM-YYYY")}),(0,m.jsx)(P.Z,{className:"p-4 md:p-16 ",component:"th",scope:"row",children:e.channel}),(0,m.jsx)(P.Z,{className:"p-4 md:p-16 ",component:"th",scope:"row",children:e.gec}),(0,m.jsx)(P.Z,{className:"p-4 md:p-16",component:"th",scope:"row",children:e.enabled?(0,m.jsx)(h.Z,{className:"text-green",size:18,children:"heroicons-outline:check-circle"}):(0,m.jsx)(h.Z,{className:"text-red",size:18,children:"heroicons-outline:minus-circle"})}),(0,m.jsxs)(P.Z,{className:"p-4 md:p-16",component:"th",scope:"row",children:[(0,m.jsx)(T.Z,{title:"Ver",placement:"top",children:(0,m.jsx)(c.Z,{onClick:function(t){return function(e){return Q.apply(this,arguments)}(e)},children:(0,m.jsx)(h.Z,{size:20,color:"action",children:"heroicons-outline:eye"})})}),(0,m.jsx)(T.Z,{title:"Editar",placement:"top",children:(0,m.jsx)(c.Z,{onClick:function(t){return function(e){return O.apply(this,arguments)}(e)},children:(0,m.jsx)(h.Z,{size:20,color:"action",children:"heroicons-outline:pencil"})})})]})]},e.id)}))})]})}),(0,m.jsx)(S.Z,{className:"shrink-0 border-t-1",component:"div",count:D.length,rowsPerPage:L,page:V,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onPageChange:function(e,t){q(t)},onRowsPerPageChange:function(e){$(e.target.value)}})]})}));var V=(0,r.Z)("notificationsApp",o.Z)((function(){var e=(0,a.Z)((function(e){return e.breakpoints.down("lg")}));return(0,m.jsx)(i.Z,{header:(0,m.jsx)(g,{}),content:(0,m.jsx)(Y,{}),scroll:e?"normal":"content"})}))},73758:function(e,t,n){var i=n(48028),r=n(9763),a=n(51882),o=(0,i.UY)({notifications:r.ZP,notification:a.ZP});t.Z=o},51882:function(e,t,n){n.d(t,{FV:function(){return p},JS:function(){return g},jp:function(){return m},k1:function(){return b},sc:function(){return Z},wD:function(){return f},wN:function(){return d}});var i,r=n(4942),a=n(74165),o=n(15861),c=n(97744),s=n(45133),l=n.n(s),u=n(90326),d=(0,c.hg)("notificationsApp/notification/addNotification",function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,console.log("noti",t),e.next=4,l().post(u._n+u.pc+"/back/notifications",t,{headers:{Authorization:u.o3}});case 4:return i=e.sent,e.next=7,i.data;case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),f=(0,c.hg)("notificationsApp/notification/updateNotification",function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,console.log("notificationData",t),e.next=4,l().put(u._n+u.pc+"/back/notifications/".concat(t.id),t,{headers:{Authorization:u.o3}});case 4:return i=e.sent,e.next=7,i.data;case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),p=(0,c.hg)("notificationsApp/notification/removeNotification",function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,n.getState,e.next=3,l().delete(u._n+u.pc+"/back/notifications/".concat(t),{headers:{Authorization:u.o3}});case 3:return e.abrupt("return",id);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h=(0,c.oM)({name:"notificationsApp/notification",initialState:{notification:{img:"",channel:"",gec:"",title:""}},reducers:{resetNotification:function(){return null},newNotification:{reducer:function(e,t){return t.payload},prepare:function(e){return{payload:{img:"",channel:"",gec:"",title:""}}}},setNotification:{reducer:function(e,t){return t.payload}}},extraReducers:(i={},(0,r.Z)(i,d.fulfilled,(function(e,t){return t.payload})),(0,r.Z)(i,f.fulfilled,(function(e,t){return t.payload})),(0,r.Z)(i,p.fulfilled,(function(e,t){return t.payload})),i)}),x=h.actions,m=x.resetNotification,g=x.newNotification,Z=x.setNotification,b=function(e){return e.notificationsApp.notification};t.ZP=h.reducer},9763:function(e,t,n){n.d(t,{TH:function(){return d},_6:function(){return x},je:function(){return Z},ks:function(){return g},ng:function(){return f}});var i,r=n(4942),a=n(74165),o=n(15861),c=n(97744),s=n(45133),l=n.n(s),u=n(90326),d=(0,c.hg)("notificationsApp/getNotifications",(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/notifications",{headers:{Authorization:u.o3}});case 2:return t=e.sent,e.next=5,t.data;case 5:return(n=e.sent).reverse(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))),f=(0,c.hg)("notificationsApp/getVariables",(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/variables",{headers:{Authorization:u.o3}});case 2:return t=e.sent,e.next=5,t.data;case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))),p=(0,c.HF)({}),h=p.getSelectors((function(e){return e.notificationsApp.notifications})),x=h.selectAll,m=(h.selectById,(0,c.oM)({name:"notificationsApp",initialState:p.getInitialState({searchText:""}),reducers:{setNotificationsSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(i={},(0,r.Z)(i,d.fulfilled,p.setAll),(0,r.Z)(i,f.fulfilled,(function(e,t){e.variables=t.payload})),i)})),g=m.actions.setNotificationsSearchText,Z=function(e){return e.notificationsApp.notifications.searchText};t.ZP=m.reducer}}]);
//# sourceMappingURL=1835.43a2575e.chunk.js.map