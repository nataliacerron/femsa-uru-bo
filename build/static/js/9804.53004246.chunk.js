"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[9804],{9804:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var r=t(1413),a=t(29439),o=t(52452),i=t(41930),s=t(93938),c=t(54696),u=t(96763),l=t(35477),d=t(95209),p=t(5019),f=t(50390),m=t(4743),x=t(10361),h=t(1314),v=t(18369),g=t(33383),Z=t(49360),y=t(94001),j=t(15290),b=t(80456),w=t(88669),C=t(82360),_=t(93693),N=t(78449),k=t(62559);var S=function(e){e.params;var n=(0,m.I0)(),t=(0,v.Gc)(),r=t.formState,o=t.watch,s=t.getValues,c=r.isValid,u=r.dirtyFields,g=(0,w.Z)(),Z=(0,x.s0)(),y=o("img_brief"),b=(0,f.useState)(),S=(0,a.Z)(b,2),B=S[0],A=S[1],I=(0,f.useState)(),E=(0,a.Z)(I,2),G=E[0],T=E[1],D=(0,x.UO)().couponId;return(0,f.useEffect)((function(){if(void 0!==(null===y||void 0===y?void 0:y.name)){var e=new FileReader;e.addEventListener("load",(function(){T(e.result)})),e.readAsDataURL(y)}else T(y)}),[y]),(0,k.jsxs)("div",{className:"flex flex-col flex-1 w-full ",children:[(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,k.jsx)(d.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,k.jsxs)(l.Z,{className:"flex items-center sm:mb-12",component:h.rU,role:"button",to:"/coupons",color:"inherit",children:[(0,k.jsx)(C.Z,{size:20,children:"ltr"===g.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,k.jsx)("span",{className:"flex mx-4 font-medium",children:"Cupones"})]})}),(0,k.jsxs)("div",{className:"flex max-w-full",children:[(0,k.jsx)("div",{className:"flex relative ",children:(0,k.jsx)(d.E.div,{className:"hidden  sm:flex",initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:""!==y?(0,k.jsx)("img",{width:250,src:G}):(0,k.jsx)("img",{width:200,src:"assets/images/apps/ecommerce/product-image-placeholder.png"})})}),(0,k.jsxs)(d.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:[(0,k.jsx)(l.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:null!==y&&void 0!==y&&y.name||""===y?"Nuevo Cupon":"Actualizar Cupon"}),(0,k.jsx)(l.Z,{variant:"caption",className:"font-medium",children:"Detalle del Cupon"})]})]})]}),(0,k.jsx)(d.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:(0,k.jsx)(p.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",disabled:"new"===D?i.Z.isEmpty(u)||!c:null,onClick:function(){var e=s();"new"===D?(0,N.DB)(e).then((function(){n(addCoupon(e)).then((function(){Z("/coupons")}))})):(0,N.DB)(e).then((function(){n((0,j.CG)(e)).then((function(e){"fulfilled"===e.meta.requestStatus&&A(!0),"rejected"===e.meta.requestStatus&&A(!1)}))}))},children:"Guardar"})})]}),B&&(0,k.jsx)(_.Z,{severity:"success",children:"Los datos se guardaron correctamente"}),!1===B?(0,k.jsx)(_.Z,{severity:"error",children:"Hubo un problema al guardar los datos"}):null]})},B=t(49056),A=t(12066);var I=function(e){var n=e.params,t=(0,v.Gc)(),a=t.control,o=t.formState.errors;return(0,k.jsxs)("div",{className:"m-10",children:[(0,k.jsx)(v.Qr,{name:"img_brief",control:a,render:function(e){var n=e.field,t=n.onChange;n.value;return(0,k.jsx)("div",{className:"mt-8 mb-16",children:(0,k.jsxs)(p.Z,{variant:"contained",component:"label",color:"primary",children:["Cargar imagen - brief",(0,k.jsx)("input",{accept:"image/*",className:"hidden",id:"button-avatar",type:"file",onChange:function(e){var n=e.target.files[0];n&&t(n)}})]})})}}),(0,k.jsx)(v.Qr,{name:"img_description",control:a,render:function(e){var n=e.field,t=n.onChange;n.value;return(0,k.jsx)("div",{className:"mt-8 mb-16",children:(0,k.jsxs)(p.Z,{variant:"contained",component:"label",color:"primary",children:["Cargar imagen - description",(0,k.jsx)("input",{accept:"image/*",className:"hidden",id:"button-avatar",type:"file",onChange:function(e){var n=e.target.files[0];n&&t(n)}})]})})}}),"new"!==n?(0,k.jsxs)("div",{children:[" ",(0,k.jsx)("label",{style:{marginLeft:10},children:"Habilitar"}),(0,k.jsx)(v.Qr,{name:"enabled",control:a,render:function(e){var n=e.field;return(0,k.jsx)(B.Z,{onChange:function(e){return n.onChange(e.target.checked)},checked:n.value})}})]}):null,(0,k.jsx)(v.Qr,{name:"due_date",control:a,render:function(e){var n,t=e.field;return(0,k.jsx)(A.Z,(0,r.Z)((0,r.Z)({},t),{},{value:t.value?new Date(t.value).toISOString().substring(0,10):"",className:"mt-8 mb-16",error:!!o.due_date,type:"date",required:!0,helperText:null===o||void 0===o||null===(n=o.due_date)||void 0===n?void 0:n.message,id:"due_date",variant:"outlined",fullWidth:!0}))}}),(0,k.jsx)(v.Qr,{name:"type",control:a,render:function(e){var n,t=e.field;return(0,k.jsx)(A.Z,(0,r.Z)((0,r.Z)({},t),{},{className:"mt-8 mb-16",error:!!o.type,required:!0,helperText:null===o||void 0===o||null===(n=o.type)||void 0===n?void 0:n.message,label:"Canal",autoFocus:!0,id:"type",variant:"outlined",fullWidth:!0,disabled:!0}))}})]})},E=Z.Ry().shape({img_brief:Z.nK().test("required","You need to provide a file",(function(e){return e&&e.size})),img_description:Z.nK().test("required","You need to provide a file",(function(e){return e&&e.size}))});var G=(0,c.Z)("couponsApp",b.Z)((function(e){var n=(0,m.I0)(),t=(0,m.v9)(j.mH),c=(0,y.Z)((function(e){return e.breakpoints.down("lg")})),Z=(0,x.UO)(),b=(0,f.useState)(!1),w=(0,a.Z)(b,2),C=w[0],_=w[1],N=(0,v.cI)({mode:"onChange",defaultValues:{img_brief:"",img_description:"",enabled:!1},resolver:(0,g.X)(E)}),B=N.reset,A=N.watch,G=(N.control,N.onChange,N.formState,A()),T=(0,x.TH)();return(0,u.KW)((function(){!function(){var e=Z.couponId;n("new"===e?(0,j.js)():(0,j.BB)(T.state))}()}),[n,Z,T]),(0,f.useEffect)((function(){t&&B(t)}),[t,B]),(0,f.useEffect)((function(){return function(){n((0,j.WI)()),_(!1)}}),[n]),C?(0,k.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,k.jsx)(l.Z,{color:"text.secondary",variant:"h5",children:"No hay Cupones!"}),(0,k.jsx)(p.Z,{className:"mt-24",component:h.rU,variant:"outlined",to:"/coupons",color:"inherit",children:"Volver a Cupones"})]}):i.Z.isEmpty(G)||t&&Z.couponId!==t.id&&"new"!==Z.couponId&&"update"!==Z.couponId?(0,k.jsx)(o.Z,{}):(0,k.jsx)(v.RV,(0,r.Z)((0,r.Z)({},N),{},{children:(0,k.jsx)(s.Z,{header:(0,k.jsx)(S,{}),content:(0,k.jsx)(I,{params:Z.couponId}),scroll:c?"normal":"content"})}))}))},15290:function(e,n,t){t.d(n,{BB:function(){return v},CG:function(){return p},WI:function(){return x},js:function(){return h},mH:function(){return g}});var r,a=t(4942),o=t(74165),i=t(15861),s=t(97744),c=t(45133),u=t.n(c),l=t(90326),d=(0,s.hg)("couponsApp/coupon/addCoupon",function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n,t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,e.next=3,u().post(l._n+l.Gn+"/back/promotions/coupons",n,{headers:{Authorization:l.o3}});case 3:return r=e.sent,e.next=6,r.data;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),p=(0,s.hg)("couponsApp/coupon/updateCoupon",function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n,t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,e.next=3,u().put(l._n+l.Gn+"/back/promotions/coupons",n,{headers:{Authorization:l.o3}});case 3:return r=e.sent,e.next=6,r.data;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),f=(0,s.oM)({name:"couponsApp/coupon",initialState:{coupon:{img_brief:"",img_description:"",enabled:!1}},reducers:{resetCoupon:function(){return null},newCoupon:{reducer:function(e,n){return n.payload},prepare:function(e){return{payload:{img_brief:"",img_description:"",enabled:!1}}}},setCoupon:{reducer:function(e,n){return n.payload}}},extraReducers:(r={},(0,a.Z)(r,d.fulfilled,(function(e,n){return n.payload})),(0,a.Z)(r,p.fulfilled,(function(e,n){return n.payload})),r)}),m=f.actions,x=m.resetCoupon,h=m.newCoupon,v=m.setCoupon,g=function(e){return e.couponsApp.coupon};n.ZP=f.reducer},90354:function(e,n,t){t.d(n,{Cd:function(){return x},II:function(){return h},Uo:function(){return l},xV:function(){return f}});var r=t(4942),a=t(74165),o=t(15861),i=t(97744),s=t(45133),c=t.n(s),u=t(90326),l=(0,i.hg)("couponsApp/getCoupons",(0,o.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get(u._n+u.Gn+"/back/promotions/coupons",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),d=(0,i.HF)({}),p=d.getSelectors((function(e){return e.couponsApp.coupons})),f=p.selectAll,m=(p.selectById,(0,i.oM)({name:"couponsApp",initialState:d.getInitialState({searchText:""}),reducers:{setCouponsSearchText:{reducer:function(e,n){e.searchText=n.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(0,r.Z)({},l.fulfilled,d.setAll)})),x=m.actions.setCouponsSearchText,h=function(e){return e.couponsApp.coupons.searchText};n.ZP=m.reducer},80456:function(e,n,t){var r=t(48028),a=t(90354),o=t(15290),i=(0,r.UY)({coupons:a.ZP,coupon:o.ZP});n.Z=i},78449:function(e,n,t){t.d(n,{DB:function(){return c},ni:function(){return u},sS:function(){return l},wf:function(){return s}});var r=t(74165),a=t(15861),o=t(31588),i=t(26759),s=function(){var e=new Date,n=e.getFullYear(),t=e.getMonth()+1;return[e.getDate(),t,n].join("_")},c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.entries(n).map(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("img_brief"!==t[0]&&"img_description"!==t[0]||!t[1].name){e.next=8;break}return a=s(),c=(0,o.iH)(i.tO,"coupons/".concat(t[1].name+"_"+a)),e.next=5,(0,o.KV)(c,t[1]);case 5:return e.next=7,(0,o.Jt)(c);case 7:n[t[0]]=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name){e.next=8;break}return a=s(),c=(0,o.iH)(i.tO,"sliders/".concat(t.name+"_"+a)),e.next=5,(0,o.KV)(c,t);case 5:return e.next=7,(0,o.Jt)(c);case 7:n.image=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),l=function(e,n){if(0==e)return"0 Bytes";var t=n||2,r=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,r)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}}}]);
//# sourceMappingURL=9804.53004246.chunk.js.map