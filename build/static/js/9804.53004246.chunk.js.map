{"version":3,"file":"static/js/9804.53004246.chunk.js","mappings":"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","sources":["app/main/coupons/coupon/CouponHeader.js","app/main/coupons/coupon/BasicInfo.js","app/main/coupons/coupon/Coupon.js","app/main/coupons/store/couponSlice.js","app/main/coupons/store/couponsSlice.js","app/main/coupons/store/index.js","app/utils/index.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport { useTheme } from \"@mui/material/styles\";\nimport Typography from \"@mui/material/Typography\";\nimport { motion } from \"framer-motion\";\nimport { useFormContext } from \"react-hook-form\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport _ from \"@lodash\";\nimport FuseSvgIcon from \"@fuse/core/FuseSvgIcon\";\nimport Alert from \"@mui/material/Alert\";\nimport IconButton from \"@mui/material/IconButton\";\nimport { upLoadImg } from \"../../../utils\";\nimport { updateCoupon } from \"../store/couponSlice\"\n\nfunction CouponHeader(props) {\n  const { params } = props;\n  const dispatch = useDispatch();\n  const methods = useFormContext();\n  const { formState, watch, getValues } = methods;\n  const { isValid, dirtyFields } = formState;\n  const theme = useTheme();\n  const navigate = useNavigate();\n  const images = watch(\"img_brief\");\n  const [openAlert, setAlert] = useState();\n  const [preview, setPreview] = useState();\n  const routeParams = useParams();\n  const { couponId } = routeParams;\n\n  function handleSaveCoupon() {\n    const data = getValues();\n    if (couponId === \"new\") {\n      upLoadImg(data).then(() => {\n        dispatch(addCoupon(data)).then(() => {\n          navigate(\"/coupons\");\n        });\n      });\n    } else {\n      upLoadImg(data).then(() => {\n        dispatch(updateCoupon(data)).then((res) => {\n          if (res.meta.requestStatus === \"fulfilled\") setAlert(true);\n          if (res.meta.requestStatus === \"rejected\") setAlert(false);\n        });\n      });\n    }\n  }\n\n  useEffect(() => {\n    //actualizo la imagen en el header\n    if (images?.name !== undefined) {\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => {\n        setPreview(reader.result);\n      });\n      reader.readAsDataURL(images);\n    } else {\n      setPreview(images);\n    }\n  }, [images]);\n\n  return (\n    <div className=\"flex flex-col flex-1 w-full \">\n      <div className=\"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32\">\n        <div className=\"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0\">\n          <motion.div\n            initial={{ x: 20, opacity: 0 }}\n            animate={{ x: 0, opacity: 1, transition: { delay: 0.3 } }}\n          >\n            <Typography\n              className=\"flex items-center sm:mb-12\"\n              component={Link}\n              role=\"button\"\n              to=\"/coupons\"\n              color=\"inherit\"\n            >\n              <FuseSvgIcon size={20}>\n                {theme.direction === \"ltr\"\n                  ? \"heroicons-outline:arrow-sm-left\"\n                  : \"heroicons-outline:arrow-sm-right\"}\n              </FuseSvgIcon>\n              <span className=\"flex mx-4 font-medium\">Cupones</span>\n            </Typography>\n          </motion.div>\n          <div className=\"flex max-w-full\">\n            <div className=\"flex relative \">\n              <motion.div\n                className=\"hidden  sm:flex\"\n                initial={{ scale: 0 }}\n                animate={{ scale: 1, transition: { delay: 0.3 } }}\n              >\n                {images !== \"\" ? (\n                  <img\n                    //  className=\"w-52 sm:w-48 rounded\"\n                    width={250}\n                    src={preview}\n                  />\n                ) : (\n                  <img\n                    //    className=\"w-32 sm:w-48 rounded\"\n                    width={200}\n                    src=\"assets/images/apps/ecommerce/product-image-placeholder.png\"\n                  />\n                )}\n              </motion.div>\n            </div>\n            <motion.div\n              className=\"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16\"\n              initial={{ x: -20 }}\n              animate={{ x: 0, transition: { delay: 0.3 } }}\n            >\n              <Typography className=\"text-16 sm:text-20 truncate font-semibold\">\n                {images?.name || images === \"\"\n                  ? \"Nuevo Cupon\"\n                  : \"Actualizar Cupon\"}\n              </Typography>\n              <Typography variant=\"caption\" className=\"font-medium\">\n                Detalle del Cupon\n              </Typography>\n            </motion.div>\n          </div>\n        </div>\n        <motion.div\n          className=\"flex\"\n          initial={{ opacity: 0, x: 20 }}\n          animate={{ opacity: 1, x: 0, transition: { delay: 0.3 } }}\n        >\n          <Button\n            className=\"whitespace-nowrap mx-4\"\n            variant=\"contained\"\n            color=\"secondary\"\n            disabled={\n              couponId === \"new\" ? _.isEmpty(dirtyFields) || !isValid : null\n            }\n            onClick={handleSaveCoupon}\n          >\n            Guardar\n          </Button>\n        </motion.div>\n      </div>\n      {openAlert && (\n        <Alert severity=\"success\">Los datos se guardaron correctamente</Alert>\n      )}\n      {openAlert === false ? (\n        <Alert severity=\"error\">Hubo un problema al guardar los datos</Alert>\n      ) : null}\n    </div>\n  );\n}\n\nexport default CouponHeader;\n","import Button from \"@mui/material/Button\";\nimport Switch from \"@mui/material/Switch\";\nimport TextField from \"@mui/material/TextField\";\nimport { Controller, useFormContext } from \"react-hook-form\";\n\nfunction BasicInfo(props) {\n  const { params } = props;\n  const methods = useFormContext();\n  const { control, formState } = methods;\n  const { errors } = formState;\n\n  return (\n    <div className=\"m-10\">\n      <Controller\n        name=\"img_brief\"\n        control={control}\n        render={({ field: { onChange, value } }) => (\n          <div className=\"mt-8 mb-16\">\n            <Button variant=\"contained\" component=\"label\" color=\"primary\">\n              Cargar imagen - brief\n              <input\n                accept=\"image/*\"\n                className=\"hidden\"\n                id=\"button-avatar\"\n                type=\"file\"\n                onChange={(e) => {\n                  const file = e.target.files[0];\n                  if (!file) {\n                    return;\n                  }\n                  onChange(file);\n                }}\n              />\n            </Button>\n          </div>\n        )}\n      />\n      <Controller\n        name=\"img_description\"\n        control={control}\n        render={({ field: { onChange, value } }) => (\n          <div className=\"mt-8 mb-16\">\n            <Button variant=\"contained\" component=\"label\" color=\"primary\">\n              Cargar imagen - description\n              <input\n                accept=\"image/*\"\n                className=\"hidden\"\n                id=\"button-avatar\"\n                type=\"file\"\n                onChange={(e) => {\n                  const file = e.target.files[0];\n                  if (!file) {\n                    return;\n                  }\n                  onChange(file);\n                }}\n              />\n            </Button>\n          </div>\n        )}\n      />\n      {params !== \"new\" ? (\n        <div>\n          {\" \"}\n          <label style={{ marginLeft: 10 }}>Habilitar</label>\n          <Controller\n            name=\"enabled\"\n            control={control}\n            render={({ field }) => (\n              <Switch\n                onChange={(e) => field.onChange(e.target.checked)}\n                checked={field.value}\n              />\n            )}\n          />\n        </div>\n      ) : null}\n      <Controller\n          name=\"due_date\"\n          control={control}\n          render={({ field }) => (\n            <TextField\n              {...field}\n              value={field.value ? new Date(field.value).toISOString().substring(0, 10) : ''}\n              className=\"mt-8 mb-16\"\n              error={!!errors.due_date}\n              type=\"date\"\n              required\n              helperText={errors?.due_date?.message}\n              id=\"due_date\"\n              variant=\"outlined\"\n              fullWidth\n            />\n          )}\n        />\n         <Controller\n        name=\"type\"\n        control={control}\n        render={({ field }) => (\n          <TextField\n            {...field}\n            className=\"mt-8 mb-16\"\n            error={!!errors.type}\n            required\n            helperText={errors?.type?.message}\n            label=\"Canal\"\n            autoFocus\n            id=\"type\"\n            variant=\"outlined\"\n            fullWidth\n            disabled\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default BasicInfo;\n","import FuseLoading from \"@fuse/core/FuseLoading\";\nimport _ from \"@lodash\";\nimport FusePageCarded from \"@fuse/core/FusePageCarded\";\nimport withReducer from \"app/store/withReducer\";\nimport { useDeepCompareEffect } from \"@fuse/hooks\";\nimport Typography from \"@mui/material/Typography\";\nimport { motion } from \"framer-motion\";\nimport Button from \"@mui/material/Button\";\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useParams, Link, useLocation } from \"react-router-dom\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport useThemeMediaQuery from \"@fuse/hooks/useThemeMediaQuery\";\nimport {\n  selectCoupon,\n  setCoupon,\n  resetCoupon,\n  newCoupon,\n} from \"../store/couponSlice\";\nimport reducer from \"../store\";\nimport CouponHeader from \"./CouponHeader\";\nimport BasicInfo from \"./BasicInfo\";\n\nconst schema = yup.object().shape({\n  img_brief: yup\n    .mixed()\n    .test(\"required\", \"You need to provide a file\", (file) => {\n      return file && file.size; // <-- u can use this if you don't want to allow empty files to be uploaded;\n    }),\n  img_description: yup\n    .mixed()\n    .test(\"required\", \"You need to provide a file\", (file) => {\n      return file && file.size; // <-- u can use this if you don't want to allow empty files to be uploaded;\n    }),\n});\n\nfunction Coupon(props) {\n  const dispatch = useDispatch();\n  const coupon = useSelector(selectCoupon);\n  const isMobile = useThemeMediaQuery((theme) => theme.breakpoints.down(\"lg\"));\n  const routeParams = useParams();\n  const [noCoupon, setnoCoupon] = useState(false);\n  const methods = useForm({\n    mode: \"onChange\",\n    defaultValues: {\n      img_brief: \"\",\n      img_description: \"\",\n      enabled: false,\n    },\n    resolver: yupResolver(schema),\n  });\n  const { reset, watch, control, onChange, formState } = methods;\n  const form = watch();\n  const location = useLocation();\n\n  useDeepCompareEffect(() => {\n    function updateCouponState() {\n      const { couponId } = routeParams;\n\n      if (couponId === \"new\") {\n        dispatch(newCoupon());\n      } else {\n        dispatch(setCoupon(location.state));\n      }\n    }\n\n    updateCouponState();\n  }, [dispatch, routeParams, location]);\n\n  useEffect(() => {\n    if (!coupon) {\n      return;\n    }\n    /**\n     * Reset the form on coupon state changes\n     */\n    reset(coupon);\n  }, [coupon, reset]);\n\n  useEffect(() => {\n    return () => {\n      dispatch(resetCoupon());\n      setnoCoupon(false);\n    };\n  }, [dispatch]);\n\n  if (noCoupon) {\n    return (\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1, transition: { delay: 0.1 } }}\n        className=\"flex flex-col flex-1 items-center justify-center h-full\"\n      >\n        <Typography color=\"text.secondary\" variant=\"h5\">\n          No hay Cupones!\n        </Typography>\n        <Button\n          className=\"mt-24\"\n          component={Link}\n          variant=\"outlined\"\n          to=\"/coupons\"\n          color=\"inherit\"\n        >\n          Volver a Cupones\n        </Button>\n      </motion.div>\n    );\n  }\n\n  if (\n    _.isEmpty(form) ||\n    (coupon &&\n      routeParams.couponId !== coupon.id &&\n      routeParams.couponId !== \"new\" &&\n      routeParams.couponId !== \"update\")\n  ) {\n    return <FuseLoading />;\n  }\n  return (\n    <FormProvider {...methods}>\n      <FusePageCarded\n        header={<CouponHeader />}\n        content={<BasicInfo params={routeParams.couponId} />}\n        scroll={isMobile ? \"normal\" : \"content\"}\n      />\n    </FormProvider>\n  );\n}\n\nexport default withReducer(\"couponsApp\", reducer)(Coupon);\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { API_VERSION, BASE_URL, TOKEN } from \"app/configs/settingsConfig\";\n\nexport const addCoupon = createAsyncThunk(\n  \"couponsApp/coupon/addCoupon\",\n  async (couponData, { dispatch, getState }) => {\n    const response = await axios.post(\n      BASE_URL + API_VERSION + \"/back/promotions/coupons\",\n      couponData,\n      { headers: { Authorization: TOKEN } }\n    );\n    const data = await response.data;\n    return data;\n  }\n);\n\nexport const updateCoupon = createAsyncThunk(\n  \"couponsApp/coupon/updateCoupon\",\n  async (couponData, { dispatch, getState }) => {\n    const response = await axios.put(\n      BASE_URL + API_VERSION + \"/back/promotions/coupons\",\n      couponData,\n      { headers: { Authorization: TOKEN } }\n    );\n    const data = await response.data;\n    return data;\n  }\n);\n\nconst couponSlice = createSlice({\n  name: \"couponsApp/coupon\",\n  initialState: {\n    coupon: { img_brief: \"\", img_description: \"\", enabled: false },\n  },\n  reducers: {\n    resetCoupon: () => null,\n    newCoupon: {\n      reducer: (state, action) => action.payload,\n      prepare: (event) => ({\n        payload: {\n          img_brief: \"\",\n          img_description: \"\",\n          enabled: false,\n        },\n      }),\n    },\n    setCoupon: {\n      reducer: (state, action) => action.payload,\n    },\n  },\n  extraReducers: {\n    [addCoupon.fulfilled]: (state, action) => action.payload,\n    [updateCoupon.fulfilled]: (state, action) => action.payload,\n  },\n});\n\nexport const { resetCoupon, newCoupon, setCoupon } = couponSlice.actions;\n\nexport const selectCoupon = ({ couponsApp }) => couponsApp.coupon;\n\nexport default couponSlice.reducer;\n","import {\n  createAsyncThunk,\n  createEntityAdapter,\n  createSlice,\n} from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { API_VERSION, BASE_URL, TOKEN } from \"app/configs/settingsConfig\";\n\nexport const getCoupons = createAsyncThunk(\n  \"couponsApp/getCoupons\",\n  async () => {\n    const response = await axios.get(\n      BASE_URL + API_VERSION + \"/back/promotions/coupons\",\n      { headers: { Authorization: TOKEN } }\n    );\n    const data = await response.data;\n    return data;\n  }\n);\n\nconst couponsAdapter = createEntityAdapter({});\n\nexport const { selectAll: selectCoupons, selectById: selectCouponById } =\n  couponsAdapter.getSelectors((state) => state.couponsApp.coupons);\n\nconst couponsSlice = createSlice({\n  name: \"couponsApp\",\n  initialState: couponsAdapter.getInitialState({\n    searchText: \"\",\n  }),\n  reducers: {\n    setCouponsSearchText: {\n      reducer: (state, action) => {\n        state.searchText = action.payload;\n      },\n      prepare: (event) => ({ payload: event.target.value || \"\" }),\n    },\n  },\n  extraReducers: {\n    [getCoupons.fulfilled]: couponsAdapter.setAll,\n  },\n});\n\nexport const { setCouponsSearchText } = couponsSlice.actions;\nexport const selectCouponsSearchText = ({ couponsApp }) =>\n  couponsApp.coupons.searchText;\n\nexport default couponsSlice.reducer;\n","import { combineReducers } from \"@reduxjs/toolkit\";\n\nimport coupons from \"./couponsSlice\";\nimport coupon from \"./couponSlice\";\n\nconst reducer = combineReducers({\n  coupons,\n  coupon,\n});\n\nexport default reducer;\n","import { ref, uploadBytes, getDownloadURL, listAll } from \"firebase/storage\";\nimport { storage } from \"../configs/fbServices\";\n\n \nexport const getDay = ()=>{\n    const date = new Date();\n    const year = date.getFullYear();\n    // ðŸ‘‡ï¸ getMonth returns integer from 0(January) to 11(December)\n    const month = date.getMonth() + 1;\n    const day = date.getDate();\n    const dateStr = [day, month,year].join('_');\n    return dateStr\n  }\n/**\n * cupones - sube imagen y guarda la url en el objeto data(datos del formulario)\n * fortato del objeto:\n * {\n    \"img_brief\": \"https://firebasestorage.googleapis.com/v0/b/femsa-arg.appspot.com/o/coupons%2F1a.webp?alt=media&token=632f9f00-838b-4699-ba84-08a975c538b2\",\n    \"img_description\": \"https://firebasestorage.googleapis.com/v0/b/femsa-arg.appspot.com/o/coupons%2F1b.webp?alt=media&token=ef6297d7-e0c3-48d9-a87e-a811579100e7\",\n    \"enabled\": true\n}\n * \n */\n export const upLoadImg = async (data) => {\n    const result = await Promise.all(\n      Object.entries(data).map(async (img_item) => {\n        if (\n          (img_item[0] === \"img_brief\" || img_item[0] === \"img_description\") &&\n          img_item[1].name\n        ) {\n          const today = getDay()\n          const imageRef = ref(\n            storage,\n            `coupons/${img_item[1].name + \"_\" + today}`\n          );\n          await uploadBytes(imageRef, img_item[1]);\n          data[img_item[0]] = await getDownloadURL(imageRef);\n        }\n      })\n    );\n  };\n\n/**\n * formato del objeto para crear el slider\n * \n{\n    \"image\": \"https://firebasestorage.googleapis.com/v0/b/femsa-arg.appspot.com/o/coupons%2F1a.webp?alt=media&token=632f9f00-838b-4699-ba84-08a975c538b2\",\n    \"type\": \"clients\"\n}\n */\n\n  export const upLoadSingleImg = async (data, images) => {\n    if (images.name) {\n      const today = getDay();\n      const imageRef = ref(storage, `sliders/${images.name + \"_\" + today}`);\n      await uploadBytes(imageRef, images);\n      data.image = await getDownloadURL(imageRef);\n    }\n  };\n\n  export const formatFileSize = (bytes,decimalPoint) =>{\n    if(bytes == 0) return '0 Bytes';\n    var k = 1000,\n        dm = decimalPoint || 2,\n        sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\n        i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n }"],"names":["props","params","dispatch","useDispatch","methods","useFormContext","formState","watch","getValues","isValid","dirtyFields","theme","useTheme","navigate","useNavigate","images","useState","openAlert","setAlert","preview","setPreview","couponId","useParams","useEffect","undefined","name","reader","FileReader","addEventListener","result","readAsDataURL","className","motion","initial","x","opacity","animate","transition","delay","Typography","component","Link","role","to","color","FuseSvgIcon","size","direction","scale","width","src","variant","Button","disabled","_","onClick","data","upLoadImg","then","addCoupon","updateCoupon","res","meta","requestStatus","Alert","severity","control","errors","render","field","onChange","value","accept","id","type","e","file","target","files","style","marginLeft","Switch","checked","TextField","Date","toISOString","substring","error","due_date","required","helperText","message","fullWidth","label","autoFocus","schema","yup","shape","img_brief","test","img_description","withReducer","reducer","coupon","useSelector","selectCoupon","isMobile","useThemeMediaQuery","breakpoints","down","routeParams","noCoupon","setnoCoupon","useForm","mode","defaultValues","enabled","resolver","yupResolver","reset","form","location","useLocation","useDeepCompareEffect","newCoupon","setCoupon","state","updateCouponState","resetCoupon","FuseLoading","FusePageCarded","header","content","scroll","createAsyncThunk","couponData","getState","axios","BASE_URL","API_VERSION","headers","Authorization","TOKEN","response","couponSlice","createSlice","initialState","reducers","action","payload","prepare","event","extraReducers","fulfilled","actions","couponsApp","getCoupons","couponsAdapter","createEntityAdapter","getSelectors","coupons","selectCoupons","selectAll","couponsSlice","selectById","getInitialState","searchText","setCouponsSearchText","setAll","selectCouponsSearchText","combineReducers","getDay","date","year","getFullYear","month","getMonth","getDate","join","Promise","all","Object","entries","map","img_item","today","imageRef","ref","storage","uploadBytes","getDownloadURL","upLoadSingleImg","image","formatFileSize","bytes","decimalPoint","dm","i","Math","floor","log","parseFloat","pow","toFixed"],"sourceRoot":""}