"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[6148],{66148:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(93938),o=t(54696),a=t(94001),i=t(80456),s=t(5019),c=t(4930),u=t(46981),l=t(35477),d=t(95209),p=t(4743),f=t(1314),h=t(82360),m=t(90354),x=t(62559);var g=function(e){var n=(0,p.I0)(),t=(0,p.v9)(m.II);return(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-16 sm:space-y-0 flex-1 w-full items-center justify-between py-32 px-24 md:px-32",children:[(0,x.jsx)(l.Z,{component:d.E.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 md:text-32 font-extrabold tracking-tight",children:"Cupones"}),(0,x.jsxs)("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row space-y-16 sm:space-y-0 flex-1 items-center justify-end space-x-8",children:[(0,x.jsxs)(u.Z,{component:d.E.div,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},className:"flex items-center w-full sm:max-w-256 space-x-8 px-16 rounded-full border-1 shadow-0",children:[(0,x.jsx)(h.Z,{color:"disabled",children:"heroicons-solid:search"}),(0,x.jsx)(c.Z,{placeholder:"Busqueda de cupones",className:"flex flex-1",disableUnderline:!0,fullWidth:!0,value:t,inputProps:{"aria-label":"Search"},onChange:function(e){return n((0,m.Cd)(e))}})]}),(0,x.jsx)(d.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.2}},children:(0,x.jsx)(s.Z,{className:"",component:f.rU,to:"/coupons/new",variant:"contained",color:"secondary",startIcon:(0,x.jsx)(h.Z,{children:"heroicons-outline:plus"}),children:"Agregar"})})," "]})]})},Z=t(74165),b=t(15861),y=t(29439),v=t(34062),j=t(41930),w=t(4182),C=t(35044),N=t(73481),_=t(1769),k=t(29399),P=t(50390),S=t(24115),A=t(52452),I=t(58531),B=t(94187),E=t(77555),T=t(64604),z=[{id:"img_brief",align:"left",disablePadding:!1,label:"Imagen",sort:!0},{id:"img_description",align:"left",disablePadding:!1,label:"Descripci\xf3n",sort:!0},{id:"type",align:"left",disablePadding:!1,label:"Canal",sort:!0},{id:"enabled",align:"left",disablePadding:!1,label:"Habilitado",sort:!0},{id:"due_date",align:"left",disablePadding:!1,label:"Vencimiento",sort:!0}];var D=function(e){return(0,x.jsx)(E.Z,{children:(0,x.jsx)(k.Z,{className:"h-48 sm:h-64",children:z.map((function(n){return(0,x.jsx)(N.Z,{sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,T.$n)(e.palette.background.default,.4):(0,T.$n)(e.palette.background.default,.02)}},className:"p-4 md:p-16",align:n.align,padding:n.disablePadding?"none":"normal",sortDirection:e.order.id===n.id&&e.order.direction,children:n.sort&&(0,x.jsx)(B.Z,{title:"Sort",placement:"right"===n.align?"bottom-end":"bottom-start",enterDelay:300,children:(0,x.jsx)(I.Z,{active:e.order.id===n.id,direction:e.order.direction,onClick:(t=n.id,function(n){e.onRequestSort(n,t)}),className:"font-semibold",children:n.label})})},n.id);var t}),this)})})};var R=(0,S.Z)((function(e){var n=(0,p.I0)(),t=(0,p.v9)(m.xV),r=(0,p.v9)(m.II),o=(0,P.useState)(!0),a=(0,y.Z)(o,2),i=a[0],s=a[1],c=(0,P.useState)(t),u=(0,y.Z)(c,2),f=u[0],g=u[1],S=(0,P.useState)(0),I=(0,y.Z)(S,2),B=I[0],E=I[1],T=(0,P.useState)(10),z=(0,y.Z)(T,2),R=z[0],U=z[1],G=(0,P.useState)({direction:"asc",id:null}),H=(0,y.Z)(G,2),q=H[0],L=H[1];function V(){return(V=(0,b.Z)((0,Z.Z)().mark((function n(t){return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.navigate("update",{state:{id:t.id,img_brief:t.img_brief,img_description:t.img_description,enabled:t.enabled,due_date:t.due_date,type:t.type}});case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,P.useEffect)((function(){n((0,m.Uo)()).then((function(e){s(!1)}))}),[n]),(0,P.useEffect)((function(){0!==r.length?(g(j.Z.filter(t,(function(e){return null!==e.type?e.type.toLowerCase().includes(r.toLowerCase()):null}))),E(0)):g(t)}),[t,r]),i?(0,x.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,x.jsx)(A.Z,{})}):0===f.length?(0,x.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-1 items-center justify-center h-full",children:(0,x.jsx)(l.Z,{color:"text.secondary",variant:"h5",children:"No se encontraron Cupones"})}):(0,x.jsxs)("div",{className:"w-full flex flex-col min-h-full",children:[(0,x.jsx)(v.Z,{className:"grow overflow-x-auto",children:(0,x.jsxs)(w.Z,{stickyHeader:!0,className:"min-w-xl ","aria-labelledby":"tableTitle",children:[(0,x.jsx)(D,{order:q,onRequestSort:function(e,n){var t=n,r="desc";q.id===n&&"desc"===q.direction&&(r="asc"),L({direction:r,id:t})},rowCount:f.length}),(0,x.jsx)(C.Z,{children:j.Z.orderBy(f,[function(e){return e[q.id]}],[q.direction]).slice(B*R,B*R+R).map((function(e){return(0,x.jsxs)(k.Z,{className:"h-72 cursor-pointer",hover:!0,onClick:function(n){return function(e){return V.apply(this,arguments)}(e)},children:[(0,x.jsx)(N.Z,{component:"th",scope:"row",padding:"none",children:(0,x.jsx)("img",{width:300,className:"rounded ml-10",src:e.img_brief,alt:e.id})}),(0,x.jsx)(N.Z,{component:"th",scope:"row",padding:"none",children:(0,x.jsx)("img",{width:150,className:"rounded",src:e.img_description,alt:e.id})}),(0,x.jsx)(N.Z,{className:"p-4 md:p-16 ",component:"th",scope:"row",children:e.type}),(0,x.jsx)(N.Z,{className:"p-4 md:p-16",component:"th",scope:"row",children:e.enabled?(0,x.jsx)(h.Z,{className:"text-green",size:20,children:"heroicons-outline:check-circle"}):(0,x.jsx)(h.Z,{className:"text-red",size:20,children:"heroicons-outline:minus-circle"})}),(0,x.jsx)(N.Z,{className:"p-4 md:p-16 ",component:"th",scope:"row",children:e.due_date?new Date(e.due_date).toLocaleDateString():""})]},e.id)}))})]})}),(0,x.jsx)(_.Z,{className:"shrink-0 border-t-1",component:"div",count:f.length,rowsPerPage:R,page:B,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onPageChange:function(e,n){E(n)},onRowsPerPageChange:function(e){U(e.target.value)}})]})}));var U=(0,o.Z)("couponsApp",i.Z)((function(){var e=(0,a.Z)((function(e){return e.breakpoints.down("lg")}));return(0,x.jsx)(r.Z,{header:(0,x.jsx)(g,{}),content:(0,x.jsx)(R,{}),scroll:e?"normal":"content"})}))},15290:function(e,n,t){t.d(n,{BB:function(){return g},CG:function(){return p},WI:function(){return m},js:function(){return x},mH:function(){return Z}});var r,o=t(4942),a=t(74165),i=t(15861),s=t(97744),c=t(45133),u=t.n(c),l=t(90326),d=(0,s.hg)("couponsApp/coupon/addCoupon",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,e.next=3,u().post(l._n+l.Gn+"/back/promotions/coupons",n,{headers:{Authorization:l.o3}});case 3:return r=e.sent,e.next=6,r.data;case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),p=(0,s.hg)("couponsApp/coupon/updateCoupon",function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,e.next=3,u().put(l._n+l.Gn+"/back/promotions/coupons",n,{headers:{Authorization:l.o3}});case 3:return r=e.sent,e.next=6,r.data;case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),f=(0,s.oM)({name:"couponsApp/coupon",initialState:{coupon:{img_brief:"",img_description:"",enabled:!1}},reducers:{resetCoupon:function(){return null},newCoupon:{reducer:function(e,n){return n.payload},prepare:function(e){return{payload:{img_brief:"",img_description:"",enabled:!1}}}},setCoupon:{reducer:function(e,n){return n.payload}}},extraReducers:(r={},(0,o.Z)(r,d.fulfilled,(function(e,n){return n.payload})),(0,o.Z)(r,p.fulfilled,(function(e,n){return n.payload})),r)}),h=f.actions,m=h.resetCoupon,x=h.newCoupon,g=h.setCoupon,Z=function(e){return e.couponsApp.coupon};n.ZP=f.reducer},90354:function(e,n,t){t.d(n,{Cd:function(){return m},II:function(){return x},Uo:function(){return l},xV:function(){return f}});var r=t(4942),o=t(74165),a=t(15861),i=t(97744),s=t(45133),c=t.n(s),u=t(90326),l=(0,i.hg)("couponsApp/getCoupons",(0,a.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c().get(u._n+u.Gn+"/back/promotions/coupons",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),d=(0,i.HF)({}),p=d.getSelectors((function(e){return e.couponsApp.coupons})),f=p.selectAll,h=(p.selectById,(0,i.oM)({name:"couponsApp",initialState:d.getInitialState({searchText:""}),reducers:{setCouponsSearchText:{reducer:function(e,n){e.searchText=n.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(0,r.Z)({},l.fulfilled,d.setAll)})),m=h.actions.setCouponsSearchText,x=function(e){return e.couponsApp.coupons.searchText};n.ZP=h.reducer},80456:function(e,n,t){var r=t(48028),o=t(90354),a=t(15290),i=(0,r.UY)({coupons:o.ZP,coupon:a.ZP});n.Z=i}}]);
//# sourceMappingURL=6148.78d86ddb.chunk.js.map