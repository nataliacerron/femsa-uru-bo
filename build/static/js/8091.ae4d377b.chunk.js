"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[8091],{8091:function(e,n,r){r.r(n),r.d(n,{default:function(){return D}});var t=r(1413),a=r(29439),i=r(52452),s=r(41930),c=r(93938),l=r(54696),o=r(96763),u=r(35477),d=r(95209),f=r(5019),m=r(50390),p=r(4743),h=r(10361),x=r(1314),v=r(18369),Z=r(33383),g=r(49360),j=r(94001),y=r(79353),w=r(27399),S=r(88669),b=r(82360),C=r(93693),k=r(78449),A=r(41627),N=r(62559);var E=function(e){var n=(0,v.Gc)(),r=n.formState,t=n.watch,i=n.getValues,c=r.isValid,l=r.dirtyFields,o=(0,S.Z)(),Z=t("image"),g=t("channel"),j=(0,m.useState)(),w=(0,a.Z)(j,2),E=w[0],_=w[1],I=(0,m.useState)(!1),B=(0,a.Z)(I,2),V=B[0],G=B[1],P=(0,m.useState)(),z=(0,a.Z)(P,2),D=z[0],T=z[1],M=(0,h.UO)(),R=(0,p.I0)(),q=(0,h.s0)(),F=M.sliderId;return(0,m.useEffect)((function(){if(void 0!==(null===Z||void 0===Z?void 0:Z.name)){var e=new FileReader;e.addEventListener("load",(function(){T(e.result)})),e.readAsDataURL(Z)}else T(Z)}),[Z]),(0,N.jsxs)("div",{className:"flex flex-col flex-1 w-full ",children:[(0,N.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,N.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,N.jsx)(d.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,N.jsxs)(u.Z,{className:"flex items-center sm:mb-12",component:x.rU,role:"button",to:"/sliders",color:"inherit",children:[(0,N.jsx)(b.Z,{size:20,children:"ltr"===o.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,N.jsx)("span",{className:"flex mx-4 font-medium",children:"Sliders"})]})}),(0,N.jsxs)("div",{className:"flex items-center max-w-full",children:[(0,N.jsx)("div",{className:"flex items-center",children:(0,N.jsx)(d.E.div,{className:"hidden sm:flex",initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:""!==Z?(0,N.jsx)("img",{width:150,src:D}):(0,N.jsx)("img",{width:100,src:"assets/images/apps/ecommerce/product-image-placeholder.png"})})}),(0,N.jsxs)(d.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:[(0,N.jsxs)(u.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:[console.log("name",g),g?"Actualizar Slider":"Nuevo Slider"]}),(0,N.jsx)(u.Z,{variant:"caption",className:"font-medium",children:"Detalle del Slider"})]})]})]}),(0,N.jsxs)(d.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:[(0,N.jsx)(f.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:function(){G(!0)},startIcon:(0,N.jsx)(b.Z,{className:"hidden sm:flex",children:"heroicons-outline:trash"}),children:"Eliminar"}),(0,N.jsx)(A.Z,{open:V,title:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar este Banner?",onCancel:function(){G(!1)},onConfirm:function(){R((0,y.zL)()).then((function(){q("/sliders")})),G(!1)}}),(0,N.jsx)(f.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",disabled:"new"===F?s.Z.isEmpty(l)||!c:null,onClick:function(){var e=i();e.type="","new"===F?(0,k.ni)(e,Z).then((function(){R((0,y.Vm)(e)).then((function(){q("/sliders")}))})):(0,k.ni)(e,Z).then((function(){R((0,y.TA)(e)).then((function(e){"fulfilled"===e.meta.requestStatus&&_(!0),"rejected"===e.meta.requestStatus&&_(!1)}))}))},children:"Guardar"})]})]}),E&&(0,N.jsx)(C.Z,{severity:"success",children:"Los datos se guardaron correctamente"}),!1===E?(0,N.jsx)(C.Z,{severity:"error",children:"hubo un problema al guardar los datos"}):null]})},_=r(25594),I=r(43965),B=r(31680),V=r(49056),G=r(78387);var P=function(e){var n=e.params,r=(0,v.Gc)(),i=r.control,s=(r.formState.errors,(0,p.I0)()),c=i._formValues,l=(c.channel,c.gec),o=(0,m.useState)([]),d=(0,a.Z)(o,2),h=d[0],x=d[1],Z=(0,m.useState)(),g=(0,a.Z)(Z,2),j=g[0],y=g[1];return(0,m.useEffect)((function(){s((0,G.ng)()).then((function(e){x(e.payload.channels)}))}),[s]),(0,m.useEffect)((function(){if(i._formValues.channel&&h.length>=1){var e=h.find((function(e){return e.canal===i._formValues.channel}));console.log("gec",l),y(e.gec)}}),[h]),(0,N.jsx)("div",{className:"m-10",children:(0,N.jsxs)(_.ZP,{container:!0,padding:4,rowSpacing:3,columnSpacing:{xs:1,sm:1,md:2},alignItems:"center",textAlign:"center",children:[(0,N.jsx)(_.ZP,{item:!0,xs:6,md:2,children:(0,N.jsx)(v.Qr,{name:"image",control:i,render:function(e){var n=e.field,r=n.onChange;n.value;return(0,N.jsxs)(f.Z,{variant:"contained",component:"label",color:"primary",children:["Cargar Imagen",(0,N.jsx)("input",{accept:"image/*",className:"hidden",id:"button-avatar",type:"file",onChange:function(e){var n=e.target.files[0];n&&r(n)}})]})}})}),(0,N.jsxs)(_.ZP,{item:!0,xs:4,md:2.5,children:[(0,N.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Canal"}),(0,N.jsx)(v.Qr,{name:"channel",control:i,render:function(e){var n=e.field;return(0,N.jsxs)(I.Z,(0,t.Z)((0,t.Z)({},n),{},{id:"channel",value:n.value||"0",variant:"outlined",fullWidth:!0,onChange:function(e){var r=e.target.value;n.onChange(r),function(e){var n=h.find((function(n){return n.canal===e.target.value}));y(n.gec)}(e)},children:[(0,N.jsx)(B.Z,{value:"0",children:" Seleccione un Canal"}),null===h||void 0===h?void 0:h.map((function(e,r){return console.log("field",n.value),(0,N.jsxs)(B.Z,{value:e.canal,children:[" ",e.canal]},r)}))]}))}})]}),(0,N.jsxs)(_.ZP,{item:!0,xs:4,md:2.5,children:[(0,N.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"GEC"}),(0,N.jsx)(v.Qr,{name:"gec",control:i,render:function(e){var n=e.field;return(0,N.jsxs)(I.Z,(0,t.Z)((0,t.Z)({},n),{},{id:"gec",value:n.value||"0",variant:"outlined",fullWidth:!0,children:[console.log("asd",n.value),(0,N.jsx)(B.Z,{value:"0",children:" Seleccione un GEC"}),null===j||void 0===j?void 0:j.map((function(e,n){return(0,N.jsxs)(B.Z,{value:e,children:[" ",e]},n)}))]}))}})]}),(0,N.jsx)(_.ZP,{item:!0,xs:6,md:2,children:"new"!==n?(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{style:{marginLeft:10},children:"Habilitar"}),(0,N.jsx)(v.Qr,{name:"enabled",control:i,render:function(e){var n=e.field;return(0,N.jsx)(V.Z,{onChange:function(e){return n.onChange(e.target.checked)},checked:n.value})}})]}):null})]})})},z=g.Ry().shape({channel:g.Z_().required("Debe seleccionar un Canal"),gec:g.Z_().required("Debe seleccionar un GEC"),image:g.nK().test("required","You need to provide a file",(function(e){return e&&e.size}))});var D=(0,l.Z)("slidersApp",w.Z)((function(e){var n=(0,p.I0)(),r=(0,p.v9)(y.me),l=(0,j.Z)((function(e){return e.breakpoints.down("lg")})),g=(0,h.UO)(),w=(0,m.useState)(!1),S=(0,a.Z)(w,2),b=S[0],C=S[1],k=(0,v.cI)({mode:"onChange",defaultValues:{enabled:!1,image:"",channel:"",gec:"",type:""},resolver:(0,Z.X)(z)});console.log("slider;",r);var A=k.reset,_=k.watch,I=(k.control,k.onChange,k.formState,_()),B=(0,h.TH)();return(0,o.KW)((function(){!function(){var e=g.sliderId;n("new"===e?(0,y.y7)():(0,y.Iu)(B.state))}()}),[n,g,B]),(0,m.useEffect)((function(){r&&A(r)}),[r,A]),(0,m.useEffect)((function(){return function(){n((0,y.Jv)()),C(!1)}}),[n]),b?(0,N.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,N.jsx)(u.Z,{color:"text.secondary",variant:"h5",children:"No hay Slider!"}),(0,N.jsx)(f.Z,{className:"mt-24",component:x.rU,variant:"outlined",to:"/sliders",color:"inherit",children:"Volver a Sliders"})]}):s.Z.isEmpty(I)||r&&g.sliderId!==r.id&&"new"!==g.sliderId&&"update"!==g.sliderId&&"view"!==g.sliderId?(0,N.jsx)(i.Z,{}):(0,N.jsx)(v.RV,(0,t.Z)((0,t.Z)({},k),{},{children:(0,N.jsx)(c.Z,{header:(0,N.jsx)(E,{params:g.sliderId}),content:(0,N.jsx)(P,{params:g.sliderId}),scroll:l?"normal":"content"})}))}))},27399:function(e,n,r){var t=r(48028),a=r(78387),i=r(79353),s=(0,t.UY)({sliders:a.ZP,slider:i.ZP});n.Z=s},79353:function(e,n,r){r.d(n,{Iu:function(){return Z},Jv:function(){return x},TA:function(){return f},Vm:function(){return d},me:function(){return g},y7:function(){return v},zL:function(){return m}});var t,a=r(4942),i=r(74165),s=r(15861),c=r(97744),l=r(45133),o=r.n(l),u=r(90326),d=(0,c.hg)("slidersApp/slider/addSlider",function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n,r){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dispatch,r.getState,console.log("slideeeeer",n),e.next=4,o().post(u._n+u.Gn+"/back/sliders",n,{headers:{Authorization:u.o3}});case 4:return t=e.sent,e.next=7,t.data;case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()),f=(0,c.hg)("slidersApp/slider/updateSlider",function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n,r){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dispatch,r.getState,e.next=3,o().put(u._n+u.Gn+"/back/sliders",n,{headers:{Authorization:u.o3}});case 3:return t=e.sent,e.next=6,t.data;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()),m=(0,c.hg)("slidersApp/slider/removeSlider",function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n,r){var t,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dispatch,t=r.getState,a=t().slidersApp.slider.id,s={id:a},e.next=5,o().delete(u._n+u.Gn+"/back/sliders",{headers:{Authorization:u.o3},data:s});case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}()),p=(0,c.oM)({name:"slidersApp/slider",initialState:{slider:{image:"",enabled:!1,channel:"",gec:"",type:""}},reducers:{resetSlider:function(){return null},newSlider:{reducer:function(e,n){return n.payload},prepare:function(e){return{payload:{image:"",enabled:!1,channel:"",gec:"",type:""}}}},setSlider:{reducer:function(e,n){return n.payload}}},extraReducers:(t={},(0,a.Z)(t,d.fulfilled,(function(e,n){return n.payload})),(0,a.Z)(t,f.fulfilled,(function(e,n){return n.payload})),(0,a.Z)(t,m.fulfilled,(function(e,n){return n.payload})),t)}),h=p.actions,x=h.resetSlider,v=h.newSlider,Z=h.setSlider,g=function(e){return e.slidersApp.slider};n.ZP=p.reducer},78387:function(e,n,r){r.d(n,{IX:function(){return d},ng:function(){return f},pk:function(){return v},xR:function(){return h}});var t,a=r(4942),i=r(74165),s=r(15861),c=r(97744),l=r(45133),o=r.n(l),u=r(90326),d=(0,c.hg)("slidersApp/getSliders",(0,s.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get(u._n+u.Gn+"/back/sliders/all",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return(r=e.sent).sort((function(e,n){return new Date(n.updated_at)-new Date(e.updated_at)})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))),f=(0,c.hg)("slidersApp/getVariables",(0,s.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get(u._n+u.pc+"/back/variables",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))),m=(0,c.HF)({}),p=m.getSelectors((function(e){return e.slidersApp.sliders})),h=p.selectAll,x=(p.selectById,(0,c.oM)({name:"slidersApp",initialState:m.getInitialState({searchText:""}),reducers:{setSlidersSearchText:{reducer:function(e,n){e.searchText=n.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(t={},(0,a.Z)(t,d.fulfilled,m.setAll),(0,a.Z)(t,f.fulfilled,(function(e,n){e.variables=n.payload})),t)})),v=(x.actions.setSlidersSearchText,function(e){return e.slidersApp.sliders.searchText});n.ZP=x.reducer},41627:function(e,n,r){r(50390);var t=r(54982),a=r(78426),i=r(93085),s=r(7887),c=r(5019),l=r(62559);n.Z=function(e){var n=e.open,r=e.title,o=e.message,u=e.onCancel,d=e.onConfirm;return(0,l.jsxs)(t.Z,{open:n,onClose:u,children:[(0,l.jsx)(a.Z,{children:r}),(0,l.jsx)(i.Z,{children:o}),(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(c.Z,{onClick:u,children:"Cancelar"}),(0,l.jsx)(c.Z,{onClick:d,color:"error",children:"Eliminar"})]})]})}},78449:function(e,n,r){r.d(n,{DB:function(){return l},ni:function(){return o},sS:function(){return u},wf:function(){return c}});var t=r(74165),a=r(15861),i=r(31588),s=r(26759),c=function(){var e=new Date,n=e.getFullYear(),r=e.getMonth()+1;return[e.getDate(),r,n].join("_")},l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.entries(n).map(function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var a,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("img_brief"!==r[0]&&"img_description"!==r[0]||!r[1].name){e.next=8;break}return a=c(),l=(0,i.iH)(s.tO,"coupons/".concat(r[1].name+"_"+a)),e.next=5,(0,i.KV)(l,r[1]);case 5:return e.next=7,(0,i.Jt)(l);case 7:n[r[0]]=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,r){var a,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.name){e.next=8;break}return a=c(),l=(0,i.iH)(s.tO,"sliders/".concat(r.name+"_"+a)),e.next=5,(0,i.KV)(l,r);case 5:return e.next=7,(0,i.Jt)(l);case 7:n.image=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),u=function(e,n){if(0==e)return"0 Bytes";var r=n||2,t=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,t)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}}}]);
//# sourceMappingURL=8091.ae4d377b.chunk.js.map