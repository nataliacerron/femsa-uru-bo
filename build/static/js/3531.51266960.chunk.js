(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[3531],{13531:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return H}});var i=t(1413),r=t(29439),a=t(52452),o=t(41930),c=t(93938),s=t(54696),u=t(96763),l=t(35477),f=t(95209),d=t(5019),m=t(50390),p=t(4743),x=t(10361),h=t(1314),Z=t(18369),v=t(33383),g=t(49360),j=t(94001),w=t(51882),b=t(73758),y=t(88669),N=t(82360),_=t(93693),S=t(78449),C=t(14476),k=t(62586),I=t(41627),P=t(62559);var E=function(e){var n=(0,Z.Gc)(),t=n.formState,i=n.watch,a=n.getValues,c=t.isValid,s=t.dirtyFields,u=(0,y.Z)(),v=i("img"),g=i("channel"),j=(0,m.useState)({msg:"",alert:""}),b=(0,r.Z)(j,2),E=b[0],A=b[1],V=(0,m.useState)(!1),D=(0,r.Z)(V,2),M=D[0],F=D[1],T=(0,m.useState)(),q=(0,r.Z)(T,2),B=(q[0],q[1],(0,x.UO)()),z=(0,p.I0)(),G=(0,x.s0)(),H=B.notificationId,R=(0,m.useState)(!1),Y=(0,r.Z)(R,2),O=Y[0],Q=Y[1];return(0,P.jsxs)("div",{className:"flex flex-col flex-1 w-full ",children:[(0,P.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,P.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,P.jsx)(f.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,P.jsxs)(l.Z,{className:"flex items-center sm:mb-12",component:h.rU,role:"button",to:"/notifications",color:"inherit",children:[(0,P.jsx)(N.Z,{size:20,children:"ltr"===u.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,P.jsx)("span",{className:"flex mx-4 font-medium",children:"Notificationes"})]})}),(0,P.jsx)("div",{className:"flex items-center max-w-full",children:(0,P.jsxs)(f.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:[(0,P.jsxs)(l.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:[console.log("name",g),"updated"===H?"Actualizar Notificaci\xf3n":"new"===H?"Nueva Notificaci\xf3n":"Ver Notificaci\xf3n"]}),(0,P.jsx)(l.Z,{variant:"caption",className:"font-medium",children:"Detalle de la Notificaci\xf3n"})]})})]}),"view"!==H&&(0,P.jsxs)(f.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:[(0,P.jsx)(d.Z,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:function(){F(!0)},startIcon:(0,P.jsx)(N.Z,{className:"hidden sm:flex",children:"heroicons-outline:trash"}),children:"Eliminar"}),(0,P.jsx)(I.Z,{open:M,title:"Confirmar eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar esta notificaci\xf3n?",onCancel:function(){F(!1)},onConfirm:function(){var e=a();z((0,w.FV)(e.id)).then((function(){G("/notifications")})),F(!1)}}),(0,P.jsx)(C.Z,{color:"secondary",onClick:function(){!function(){var e=a();console.log("data",e),"0"===e.channel||"0"===e.gec||""===e.title||null===e.description||null===e.date_due||null===e.img?A({msg:"Existen campos vac\xedos",alert:!1}):(console.log("notificationId",H),"new"===H?(0,S.ni)(e,v).then((function(){e.img=e.image,delete e.image,console.log("data1",e),z((0,w.wN)(e)).then((function(){Q(!1),G("/notifications")}))})):(delete e.updated_at,"string"===typeof v?(e.img=v,z((0,w.wD)(e)).then((function(e){"fulfilled"===e.meta.requestStatus&&G("/notifications"),"rejected"===e.meta.requestStatus&&A(!1),Q(!1)}))):(0,S.ni)(e,v).then((function(){e.img=e.image,delete e.image,z((0,w.wD)(e)).then((function(e){"fulfilled"===e.meta.requestStatus&&G("/notifications"),"rejected"===e.meta.requestStatus&&A(!1),Q(!1)}))}))))}(),Q(!0)},loading:O,loadingPosition:"start",startIcon:(0,P.jsx)(k.Z,{}),variant:"contained",disabled:"new"===H?o.Z.isEmpty(s)||!c:null,children:(0,P.jsx)("span",{children:"Guardar"})})]})]}),E.alert&&(0,P.jsx)(_.Z,{severity:"success",children:"Los datos se guardaron correctamente"}),!1===E.alert?(0,P.jsx)(_.Z,{severity:"error",children:E.msg}):null]})},A=t(12066),V=t(25594),D=t(43965),M=t(31680),F=t(49056),T=t(9763),q=t(60606),B=t.n(q);var z=function(e){var n=e.params,t=(0,Z.Gc)(),a=t.control,o=(t.formState.errors,(0,p.I0)()),c=a._formValues,s=c.id,u=(c.title,c.img),f=(c.channel,c.gec),x=(0,m.useState)(),h=(0,r.Z)(x,2),v=h[0],g=h[1],j=(0,m.useState)(),w=(0,r.Z)(j,2),b=w[0],y=w[1],N=(0,m.useState)(u),_=(0,r.Z)(N,2),S=_[0],C=_[1];return(0,m.useEffect)((function(){o((0,T.ng)()).then((function(e){g(e.payload.channels)}))}),[o]),(0,m.useEffect)((function(){u&&C(u)}),[s]),(0,m.useEffect)((function(){if(a._formValues.channel&&v.length>=1){var e=v.find((function(e){return e.canal===a._formValues.channel}));console.log("gec",f),y(e.gec)}}),[v]),(0,P.jsxs)("div",{children:[(0,P.jsxs)(V.ZP,{container:!0,padding:5,rowSpacing:4,columnSpacing:{xs:1,sm:1,md:2},alignItems:"center",children:[(0,P.jsxs)(V.ZP,{item:!0,xs:6,md:4,children:[(0,P.jsx)(l.Z,{className:"text-14 sm:text-16 truncate font-semibold",children:"Titulo"}),(0,P.jsx)(Z.Qr,{name:"title",control:a,render:function(e){var t=e.field;return(0,P.jsx)(A.Z,(0,i.Z)((0,i.Z)({required:!0},t),{},{autoFocus:!0,placeholder:"Ingrese el Nombre",id:"title",variant:"outlined",fullWidth:!0,disabled:"view"===n,inputProps:{maxLength:50}}))}})]}),(0,P.jsxs)(V.ZP,{item:!0,xs:4,md:2,children:[(0,P.jsx)(l.Z,{className:"text-14 sm:text-16 truncate font-semibold",children:"Vencimiento"}),(0,P.jsx)(Z.Qr,{name:"due_date",control:a,render:function(e){var t=e.field;return(0,P.jsx)(A.Z,(0,i.Z)((0,i.Z)({},t),{},{type:"date",value:t.value?B()(t.value).format("YYYY-MM-DD"):"",id:"due_name",variant:"outlined",fullWidth:!0,disabled:"view"===n}))}})]}),(0,P.jsxs)(V.ZP,{item:!0,xs:4,md:2,children:[(0,P.jsx)(l.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Canal"}),(0,P.jsx)(Z.Qr,{name:"channel",control:a,render:function(e){var t=e.field;return(0,P.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},t),{},{id:"channel",value:t.value||0,variant:"outlined",fullWidth:!0,disabled:"view"===n,onChange:function(e){var n=e.target.value;t.onChange(n),function(e){var n=v.find((function(n){return n.canal===e.target.value}));y(n.gec)}(e)},children:[(0,P.jsx)(M.Z,{value:0,children:" Seleccione un Canal"}),null===v||void 0===v?void 0:v.map((function(e,n){return(0,P.jsxs)(M.Z,{value:e.canal,children:[" ",e.canal]},n)}))]}))}})]}),(0,P.jsxs)(V.ZP,{item:!0,xs:4,md:2,children:[(0,P.jsx)(l.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"GEC"}),(0,P.jsx)(Z.Qr,{name:"gec",control:a,render:function(e){var t=e.field;return(0,P.jsxs)(D.Z,(0,i.Z)((0,i.Z)({},t),{},{id:"gec",value:t.value||0,variant:"outlined",fullWidth:!0,disabled:"view"===n,children:[(0,P.jsx)(M.Z,{value:0,children:" Seleccione un GEC"}),null===b||void 0===b?void 0:b.map((function(e,n){return(0,P.jsxs)(M.Z,{value:e,children:[" ",e]},n)}))]}))}})]}),"new"!==n?(0,P.jsx)(V.ZP,{item:!0,xs:6,md:2,children:(0,P.jsxs)("div",{children:[(0,P.jsx)("label",{style:{marginLeft:10},children:"Habilitar"}),(0,P.jsx)(Z.Qr,{name:"enabled",control:a,render:function(e){var t=e.field;return(0,P.jsx)(F.Z,{onChange:function(e){return t.onChange(e.target.checked)},disabled:"view"===n,checked:t.value})}})]})}):null]}),(0,P.jsxs)(V.ZP,{container:!0,padding:4,rowSpacing:5,columnSpacing:{xs:1,sm:1,md:4},alignItems:"center",children:[(0,P.jsxs)(V.ZP,{item:!0,xs:4,md:5,children:[(0,P.jsx)(l.Z,{className:"text-14 sm:text-16 truncate font-semibold",children:"Descripcion"}),(0,P.jsx)(Z.Qr,{name:"description",control:a,render:function(e){var t=e.field;return(0,P.jsx)(A.Z,(0,i.Z)((0,i.Z)({required:!0},t),{},{placeholder:"Ingrese la Descripcion",id:"description",variant:"outlined",fullWidth:!0,multiline:!0,rows:3,disabled:"view"===n,inputProps:{maxLength:150}}))}})]}),"view"!==n&&(0,P.jsxs)(V.ZP,{item:!0,xs:6,md:2,textAlign:"center",children:[(0,P.jsx)(l.Z,{className:"mb-5 text-14 sm:text-16 truncate font-semibold",children:"Imagen"}),(0,P.jsx)(Z.Qr,{name:"img",control:a,render:function(e){var n=e.field,t=n.onChange;n.value;return(0,P.jsxs)(d.Z,{variant:"contained",component:"label",color:"primary",children:["Cargar Imagen",(0,P.jsx)("input",{accept:"image/*",className:"hidden",id:"button-avatar",type:"file",onChange:function(e){var n=e.target.files[0];n&&(t(n),function(e){var n=e.target.files[0],t=new FileReader;t.onload=function(){C(t.result)},t.readAsDataURL(n)}(e))}})]})}})]}),(0,P.jsx)(V.ZP,{item:!0,xs:6,md:2,textAlign:"center",children:(0,P.jsx)("img",{width:"90%",className:"rounded",src:S})})]})]})},G=g.Ry().shape({channel:g.Z_().required("Debe seleccionar un Canal"),gec:g.Z_().required("Debe seleccionar un GEC"),due_date:g.Z_().required("Debe seleccionar ingresar una Fecha de Vencimiento"),title:g.Z_().required("Debe ingresar un Titulo")});var H=(0,s.Z)("notificationsApp",b.Z)((function(e){var n=(0,p.I0)(),t=(0,p.v9)(w.k1),s=(0,j.Z)((function(e){return e.breakpoints.down("lg")})),g=(0,x.UO)(),b=(0,m.useState)(!1),y=(0,r.Z)(b,2),N=y[0],_=y[1],S=(0,Z.cI)({mode:"onChange",defaultValues:{img:"",channel:"",gec:"",title:"",description:""},resolver:(0,v.X)(G)});console.log("notification;",t);var C=S.reset,k=S.watch,I=(S.control,S.onChange,S.formState,k()),A=(0,x.TH)();return(0,u.KW)((function(){!function(){var e=g.notificationId;n("new"===e?(0,w.JS)():(0,w.sc)(A.state))}()}),[n,g,A]),(0,m.useEffect)((function(){t&&C(t)}),[t,C]),(0,m.useEffect)((function(){return function(){n((0,w.jp)()),_(!1)}}),[n]),N?(0,P.jsxs)(f.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,P.jsx)(l.Z,{color:"text.secondary",variant:"h5",children:"No hay Notificacion!"}),(0,P.jsx)(d.Z,{className:"mt-24",component:h.rU,variant:"outlined",to:"/notifications",color:"inherit",children:"Volver a Notificationes"})]}):o.Z.isEmpty(I)||t&&g.notificationId!==t.id&&"new"!==g.notificationId&&"update"!==g.notificationId&&"view"!==g.notificationId?(0,P.jsx)(a.Z,{}):(0,P.jsx)(Z.RV,(0,i.Z)((0,i.Z)({},S),{},{children:(0,P.jsx)(c.Z,{header:(0,P.jsx)(E,{params:g.notificationId}),content:(0,P.jsx)(z,{params:g.notificationId}),scroll:s?"normal":"content"})}))}))},73758:function(e,n,t){"use strict";var i=t(48028),r=t(9763),a=t(51882),o=(0,i.UY)({notifications:r.ZP,notification:a.ZP});n.Z=o},51882:function(e,n,t){"use strict";t.d(n,{FV:function(){return m},JS:function(){return Z},jp:function(){return h},k1:function(){return g},sc:function(){return v},wD:function(){return d},wN:function(){return f}});var i,r=t(4942),a=t(74165),o=t(15861),c=t(97744),s=t(45133),u=t.n(s),l=t(90326),f=(0,c.hg)("notificationsApp/notification/addNotification",function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,t){var i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("noti",n),e.next=4,u().post(l._n+l.pc+"/back/notifications",n,{headers:{Authorization:l.o3}});case 4:return i=e.sent,e.next=7,i.data;case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),d=(0,c.hg)("notificationsApp/notification/updateNotification",function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,t){var i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("notificationData",n),e.next=4,u().put(l._n+l.pc+"/back/notifications/".concat(n.id),n,{headers:{Authorization:l.o3}});case 4:return i=e.sent,e.next=7,i.data;case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),m=(0,c.hg)("notificationsApp/notification/removeNotification",function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,e.next=3,u().delete(l._n+l.pc+"/back/notifications/".concat(n),{headers:{Authorization:l.o3}});case 3:return e.abrupt("return",id);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),p=(0,c.oM)({name:"notificationsApp/notification",initialState:{notification:{img:"",channel:"",gec:"",title:""}},reducers:{resetNotification:function(){return null},newNotification:{reducer:function(e,n){return n.payload},prepare:function(e){return{payload:{img:"",channel:"",gec:"",title:""}}}},setNotification:{reducer:function(e,n){return n.payload}}},extraReducers:(i={},(0,r.Z)(i,f.fulfilled,(function(e,n){return n.payload})),(0,r.Z)(i,d.fulfilled,(function(e,n){return n.payload})),(0,r.Z)(i,m.fulfilled,(function(e,n){return n.payload})),i)}),x=p.actions,h=x.resetNotification,Z=x.newNotification,v=x.setNotification,g=function(e){return e.notificationsApp.notification};n.ZP=p.reducer},9763:function(e,n,t){"use strict";t.d(n,{TH:function(){return f},_6:function(){return x},je:function(){return v},ks:function(){return Z},ng:function(){return d}});var i,r=t(4942),a=t(74165),o=t(15861),c=t(97744),s=t(45133),u=t.n(s),l=t(90326),f=(0,c.hg)("notificationsApp/getNotifications",(0,o.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get(l._n+l.pc+"/back/notifications",{headers:{Authorization:l.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return(t=e.sent).reverse(),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))),d=(0,c.hg)("notificationsApp/getVariables",(0,o.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get(l._n+l.pc+"/back/variables",{headers:{Authorization:l.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),m=(0,c.HF)({}),p=m.getSelectors((function(e){return e.notificationsApp.notifications})),x=p.selectAll,h=(p.selectById,(0,c.oM)({name:"notificationsApp",initialState:m.getInitialState({searchText:""}),reducers:{setNotificationsSearchText:{reducer:function(e,n){e.searchText=n.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(i={},(0,r.Z)(i,f.fulfilled,m.setAll),(0,r.Z)(i,d.fulfilled,(function(e,n){e.variables=n.payload})),i)})),Z=h.actions.setNotificationsSearchText,v=function(e){return e.notificationsApp.notifications.searchText};n.ZP=h.reducer},41627:function(e,n,t){"use strict";t(50390);var i=t(54982),r=t(78426),a=t(93085),o=t(7887),c=t(5019),s=t(62559);n.Z=function(e){var n=e.open,t=e.title,u=e.message,l=e.onCancel,f=e.onConfirm;return(0,s.jsxs)(i.Z,{open:n,onClose:l,children:[(0,s.jsx)(r.Z,{children:t}),(0,s.jsx)(a.Z,{children:u}),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(c.Z,{onClick:l,children:"Cancelar"}),(0,s.jsx)(c.Z,{onClick:f,color:"error",children:"Eliminar"})]})]})}},78449:function(e,n,t){"use strict";t.d(n,{DB:function(){return s},ni:function(){return u},sS:function(){return l},wf:function(){return c}});var i=t(74165),r=t(15861),a=t(31588),o=t(26759),c=function(){var e=new Date,n=e.getFullYear(),t=e.getMonth()+1;return[e.getDate(),t,n].join("_")},s=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.entries(n).map(function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("img_brief"!==t[0]&&"img_description"!==t[0]||!t[1].name){e.next=8;break}return r=c(),s=(0,a.iH)(o.tO,"coupons/".concat(t[1].name+"_"+r)),e.next=5,(0,a.KV)(s,t[1]);case 5:return e.next=7,(0,a.Jt)(s);case 7:n[t[0]]=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n,t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name){e.next=8;break}return r=c(),s=(0,a.iH)(o.tO,"sliders/".concat(t.name+"_"+r)),e.next=5,(0,a.KV)(s,t);case 5:return e.next=7,(0,a.Jt)(s);case 7:n.image=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),l=function(e,n){if(0==e)return"0 Bytes";var t=n||2,i=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,i)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}},62586:function(e,n,t){"use strict";var i=t(64836);n.Z=void 0;var r=i(t(66830)),a=t(62559),o=(0,r.default)((0,a.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");n.Z=o},66830:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=t(51298)},51298:function(e,n,t){"use strict";t.r(n),t.d(n,{capitalize:function(){return r.Z},createChainedFunction:function(){return a.Z},createSvgIcon:function(){return o.Z},debounce:function(){return c.Z},deprecatedPropType:function(){return s},isMuiElement:function(){return u.Z},ownerDocument:function(){return l.Z},ownerWindow:function(){return f.Z},requirePropFactory:function(){return d},setRef:function(){return m},unstable_ClassNameGenerator:function(){return w},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return x.Z},unsupportedProp:function(){return h},useControlled:function(){return Z.Z},useEventCallback:function(){return v.Z},useForkRef:function(){return g.Z},useIsFocusVisible:function(){return j.Z}});var i=t(95598),r=t(91442),a=t(32406),o=t(72717),c=t(4389);var s=function(e,n){return function(){return null}},u=t(51688),l=t(64132),f=t(96380);t(87462);var d=function(e,n){return function(){return null}},m=t(65638).Z,p=t(40839),x=t(4733);var h=function(e,n,t,i,r){return null},Z=t(40528),v=t(61534),g=t(33025),j=t(21012),w={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),i.Z.configure(e)}}},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);
//# sourceMappingURL=3531.51266960.chunk.js.map