"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[94],{50094:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var r=t(1413),a=t(29439),i=t(52452),s=t(41930),o=t(93938),c=t(54696),l=t(96763),u=t(35477),d=t(95209),p=t(5019),f=t(50390),m=t(4743),x=t(10361),h=t(1314),v=t(18369),Z=t(33383),g=t(49360),j=t(94001),w=t(3237),y=t(6302),b=t(74165),P=t(15861),_=t(88669),N=t(82360),S=t(93693),C=t(31588),E=t(34758),A=(t(78449),t(14476)),I=t(62586),k=t(62559);var B=function(e){var n=e.params,t=(0,m.I0)(),r=(0,v.Gc)(),i=r.formState,o=(r.watch,r.getValues),c=i.isValid,l=i.dirtyFields,p=(0,_.Z)(),Z=(0,x.s0)(),g=(0,f.useState)({msg:"",alert:""}),j=(0,a.Z)(g,2),y=j[0],B=j[1],D=(0,f.useState)(),T=(0,a.Z)(D,2),V=(T[0],T[1],(0,x.UO)().pointId),O=((0,C.cF)(),(0,m.v9)(E.dy)),F=(0,f.useState)(!1),M=(0,a.Z)(F,2),W=M[0],z=M[1],R=function(){var e=(0,P.Z)((0,b.Z)().mark((function e(){var n;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o(),console.log("data a guardar: ",n),""===n.description||""===n.points?(B({msg:"Existen campos vac\xedos",alert:!1}),z(!1)):(console.log("userrrrrrr",O.data),n.points=parseInt(n.points,10),n.client_id=n.client_id.split(/,\s*|\s+/),n.user_id="jose.bozzone",t((0,w.c5)(n)).then((function(){z(!1),Z("/points")})));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsxs)("div",{className:"flex flex-col flex-1 w-full ",children:[(0,k.jsxs)("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-32 px-24 md:px-32",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center sm:items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[(0,k.jsx)(d.E.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:(0,k.jsxs)(u.Z,{className:"flex items-center sm:mb-12",component:h.rU,role:"button",to:"/points",color:"inherit",children:[(0,k.jsx)(N.Z,{size:20,children:"ltr"===p.direction?"heroicons-outline:arrow-sm-left":"heroicons-outline:arrow-sm-right"}),(0,k.jsx)("span",{className:"flex mx-4 font-medium",children:"Puntos Adicionales"})]})}),(0,k.jsx)("div",{className:"flex max-w-full",children:(0,k.jsxs)(d.E.div,{className:"flex flex-col items-center sm:items-start min-w-0 mx-8 sm:mx-16",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:[(0,k.jsx)(u.Z,{className:"text-16 sm:text-20 truncate font-semibold",children:"new"===n?"Nuevos Puntos":"Vista de Puntos Adicionales"}),(0,k.jsx)(u.Z,{variant:"caption",className:"font-medium",children:"Detalle de Puntos Adicionales"})]})})]}),(0,k.jsx)(d.E.div,{className:"flex",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:"view"!==V&&(0,k.jsx)(A.Z,{color:"secondary",onClick:function(){R(),z(!0)},loading:W,loadingPosition:"start",startIcon:(0,k.jsx)(I.Z,{}),variant:"contained",disabled:"new"===V?s.Z.isEmpty(l)||!c:null,children:(0,k.jsx)("span",{children:"Guardar"})})})]}),y.alert&&(0,k.jsx)(S.Z,{severity:"success",children:"Los datos se guardaron correctamente"}),!1===y.alert?(0,k.jsx)(S.Z,{severity:"error",children:y.msg}):null]})},D=t(12066),T=t(25594),V=t(73413),O=t(67440),F=t(43965),M=t(31680),W=t(1262);t(60606);var z=function(e){var n=e.params,t=(0,v.Gc)(),i=t.control,s=t.formState.errors,o=(0,m.I0)(),c=(0,f.useState)(),l=(0,a.Z)(c,2),d=l[0],p=l[1],x=(0,f.useState)(),h=(0,a.Z)(x,2),Z=h[0],g=h[1],j=i._formValues,w=(j.id,j.client_id),y=(j.description,j.points,j.channel),b=j.gec,P=(0,f.useState)("cliente"),_=(0,a.Z)(P,2),N=_[0],S=_[1];return console.log("params",n),(0,f.useEffect)((function(){o((0,W.ng)()).then((function(e){p(e.payload.channels)}))}),[o]),(0,f.useEffect)((function(){w&&S("cliente"),y&&S("canal")}),[i._formValues]),(0,f.useEffect)((function(){if(i._formValues.channel&&d.length>=1){var e=d.find((function(e){return e.canal===i._formValues.channel}));console.log("gec",b),g(e.gec)}}),[d]),(0,k.jsxs)("div",{className:"ml-10",children:[(0,k.jsxs)(T.ZP,{container:!0,padding:4,rowSpacing:1,columnSpacing:{xs:1,sm:1,md:3},children:["new"===n&&(0,k.jsxs)(T.ZP,{item:!0,xs:4,md:1.7,children:[(0,k.jsx)(u.Z,{className:"text-16 sm:text-16 truncate font-semibold",children:"Tipo"}),(0,k.jsxs)(V.Z,{value:N,exclusive:!0,onChange:function(e){S(e.target.value)},"aria-label":"channel or client",id:"type",disabled:"view"===n,children:[(0,k.jsx)(O.Z,{value:"cliente","aria-label":"Cliente",children:"Cliente"}),(0,k.jsx)(O.Z,{value:"canal","aria-label":"Canal",children:"Canal"})]})]}),"cliente"===N?(0,k.jsxs)(T.ZP,{item:!0,xs:6,md:7,children:[(0,k.jsx)(u.Z,{className:"text-12 sm:text-14 truncate font-semibold",children:"Ingrese ID de cliente separados por coma."}),(0,k.jsx)(v.Qr,{name:"client_id",control:i,render:function(e){var t,a=e.field;return(0,k.jsx)(D.Z,(0,r.Z)((0,r.Z)({required:!0,error:!!s.client_id,helperText:null===s||void 0===s||null===(t=s.client_id)||void 0===t?void 0:t.message},a),{},{value:a.value||"",placeholder:" Ejemplo: 300896, 300899, 12023, 12366",autoFocus:!0,id:"client_id",variant:"outlined",fullWidth:!0,disabled:"view"===n}))}})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(T.ZP,{item:!0,xs:4,md:2,children:[(0,k.jsx)(u.Z,{className:"text-16 sm:text-14 truncate font-semibold",children:"Canal"}),(0,k.jsx)(v.Qr,{name:"channel",control:i,render:function(e){var n=e.field;return(0,k.jsxs)(F.Z,(0,r.Z)((0,r.Z)({},n),{},{id:"channel",value:n.value||"0",variant:"outlined",fullWidth:!0,onChange:function(e){var t=e.target.value;n.onChange(t),function(e){var n=d.find((function(n){return n.canal===e.target.value}));g(n.gec)}(e)},children:[(0,k.jsx)(M.Z,{value:"0",children:" Seleccione un Canal"}),null===d||void 0===d?void 0:d.map((function(e,t){return console.log("dield",n.value),(0,k.jsxs)(M.Z,{value:e.canal,children:[" ",e.canal]},t)}))]}))}})]}),(0,k.jsxs)(T.ZP,{item:!0,xs:4,md:2,children:[(0,k.jsx)(u.Z,{className:"text-16 sm:text-14 truncate font-semibold",children:"GEC"}),(0,k.jsx)(v.Qr,{name:"gec",control:i,render:function(e){var n=e.field;return(0,k.jsxs)(F.Z,(0,r.Z)((0,r.Z)({},n),{},{id:"gec",value:n.value||"0",variant:"outlined",fullWidth:!0,children:[(0,k.jsx)(M.Z,{value:"0",children:" Seleccione un GEC"}),null===Z||void 0===Z?void 0:Z.map((function(e,n){return(0,k.jsxs)(M.Z,{value:e,children:[" ",e]},n)}))]}))}})]})]})]}),(0,k.jsx)(T.ZP,{container:!0,padding:4,rowSpacing:1,columnSpacing:{xs:1,sm:1,md:3},children:(0,k.jsxs)(T.ZP,{item:!0,xs:6,md:7,children:[(0,k.jsx)(u.Z,{className:"text-12 sm:text-14 truncate font-semibold",children:"Detalle CONCEPTO o REFERENCIA"}),(0,k.jsx)(v.Qr,{name:"description",control:i,render:function(e){var t,a=e.field;return(0,k.jsx)(D.Z,(0,r.Z)((0,r.Z)({required:!0,error:!!s.description,helperText:null===s||void 0===s||null===(t=s.description)||void 0===t?void 0:t.message},a),{},{value:a.value||"",placeholder:"Ingrese un Detalle",id:"description",variant:"outlined",fullWidth:!0,disabled:"view"===n}))}})]})}),(0,k.jsx)(T.ZP,{container:!0,padding:4,rowSpacing:1,columnSpacing:{xs:1,sm:1,md:3},children:(0,k.jsxs)(T.ZP,{item:!0,xs:6,md:4,children:[(0,k.jsx)(u.Z,{className:"text-12 sm:text-14 truncate font-semibold",children:"Cantidad de PUNTOS A A\xd1ADIR por cliente"}),(0,k.jsx)(v.Qr,{name:"points",control:i,render:function(e){var t,a=e.field;return(0,k.jsx)(D.Z,(0,r.Z)((0,r.Z)({className:"mt-8 mb-16",required:!0,error:!!s.name,helperText:null===s||void 0===s||null===(t=s.name)||void 0===t?void 0:t.message},a),{},{value:a.value||"",placeholder:"N\xfameros enteros, sin puntuaci\xf3n. Ejemplo: 1250",id:"points",variant:"outlined",fullWidth:!0,disabled:"view"===n,inputProps:{pattern:"[0-9]*",inputMode:"numeric",maxLength:10}}))}})]})})]})},R=g.Ry().shape({description:g.Z_().required("Debe ingresar una descripcion"),points:g.Z_().required("Debe ingresar un Nombre")});var G=(0,c.Z)("pointsApp",y.Z)((function(e){var n=(0,m.I0)(),t=(0,m.v9)(w.dD),c=(0,j.Z)((function(e){return e.breakpoints.down("lg")})),g=(0,x.UO)(),y=(0,f.useState)(!1),b=(0,a.Z)(y,2),P=b[0],_=b[1],N=(0,v.cI)({mode:"onChange",defaultValues:{client_id:[],channel:null,gec:null,description:""},resolver:(0,Z.X)(R)}),S=N.reset,C=N.watch,E=(N.control,N.onChange,N.formState,C()),A=(0,x.TH)();return(0,l.KW)((function(){!function(){var e=g.pointId;n("new"===e?(0,w.WO)():(0,w.N7)(A.state))}()}),[n,g,A]),(0,f.useEffect)((function(){t&&S(t)}),[t,S]),(0,f.useEffect)((function(){return function(){n((0,w.BP)()),_(!1)}}),[n]),P?(0,k.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[(0,k.jsx)(u.Z,{color:"text.secondary",variant:"h5",children:"No hay Competencias"}),(0,k.jsx)(p.Z,{className:"mt-24",component:h.rU,variant:"outlined",to:"/points",color:"inherit",children:"Volver a Competencias"})]}):s.Z.isEmpty(E)||t&&g.pointId!==t.id&&"new"!==g.pointId&&"update"!==g.pointId&&"view"!==g.pointId?(0,k.jsx)(i.Z,{}):(0,k.jsx)(v.RV,(0,r.Z)((0,r.Z)({},N),{},{children:(0,k.jsx)(o.Z,{header:(0,k.jsx)(B,{params:g.pointId}),content:(0,k.jsx)(z,{params:g.pointId}),scroll:c?"normal":"content"})}))}))},6302:function(e,n,t){var r=t(48028),a=t(1262),i=t(3237),s=(0,r.UY)({points:a.ZP,point:i.ZP});n.Z=s},3237:function(e,n,t){t.d(n,{BP:function(){return m},N7:function(){return h},WO:function(){return x},c5:function(){return d},dD:function(){return v}});var r=t(4942),a=t(74165),i=t(1413),s=t(15861),o=t(97744),c=t(45133),l=t.n(c),u=t(90326),d=(0,o.hg)("pointsApp/point/addPoint",function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,t){var r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.getState,console.log("pointData a guardar",n),e.next=4,l().post(u._n+u.pc+"/back/manual_points",(0,i.Z)({},n),{headers:{Authorization:u.o3}});case 4:return r=e.sent,e.next=7,r.data;case 7:return s=e.sent,console.log("dataaaaaa",s),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),p=(0,o.oM)({name:"pointsApp/point",initialState:{point:{client_id:[],channel:null,gec:null,description:""}},reducers:{resetPoint:function(){return null},newPoint:{reducer:function(e,n){return n.payload},prepare:function(e){return{payload:{client_id:[],channel:null,gec:null,description:""}}}},setPoint:{reducer:function(e,n){return n.payload}}},extraReducers:(0,r.Z)({},d.fulfilled,(function(e,n){return n.payload}))}),f=p.actions,m=f.resetPoint,x=f.newPoint,h=f.setPoint,v=function(e){return e.pointsApp.point};n.ZP=p.reducer},1262:function(e,n,t){t.d(n,{Eu:function(){return d},ng:function(){return p},pn:function(){return x},pr:function(){return v},z5:function(){return Z}});var r,a=t(4942),i=t(74165),s=t(15861),o=t(97744),c=t(45133),l=t.n(c),u=t(90326),d=(0,o.hg)("pointsApp/getPoints",(0,s.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/manual_points",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return(t=e.sent).reverse(),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))),p=(0,o.hg)("pointsApp/getVariables",(0,s.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get(u._n+u.pc+"/back/variables",{headers:{Authorization:u.o3}});case 2:return n=e.sent,e.next=5,n.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),f=(0,o.HF)({}),m=f.getSelectors((function(e){return e.pointsApp.points})),x=m.selectAll,h=(m.selectById,(0,o.oM)({name:"pointsApp",initialState:f.getInitialState({searchText:"",variables:[]}),reducers:{setPointsSearchText:{reducer:function(e,n){e.searchText=n.payload},prepare:function(e){return{payload:e.target.value||""}}}},extraReducers:(r={},(0,a.Z)(r,d.fulfilled,f.setAll),(0,a.Z)(r,p.fulfilled,(function(e,n){e.variables=n.payload})),r)})),v=h.actions.setPointsSearchText,Z=function(e){return e.pointsApp.points.searchText};n.ZP=h.reducer},78449:function(e,n,t){t.d(n,{DB:function(){return c},ni:function(){return l},sS:function(){return u},wf:function(){return o}});var r=t(74165),a=t(15861),i=t(31588),s=t(26759),o=function(){var e=new Date,n=e.getFullYear(),t=e.getMonth()+1;return[e.getDate(),t,n].join("_")},c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.entries(n).map(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("img_brief"!==t[0]&&"img_description"!==t[0]||!t[1].name){e.next=8;break}return a=o(),c=(0,i.iH)(s.tO,"coupons/".concat(t[1].name+"_"+a)),e.next=5,(0,i.KV)(c,t[1]);case 5:return e.next=7,(0,i.Jt)(c);case 7:n[t[0]]=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name){e.next=8;break}return a=o(),c=(0,i.iH)(s.tO,"sliders/".concat(t.name+"_"+a)),e.next=5,(0,i.KV)(c,t);case 5:return e.next=7,(0,i.Jt)(c);case 7:n.image=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),u=function(e,n){if(0==e)return"0 Bytes";var t=n||2,r=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,r)).toFixed(t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}}}]);
//# sourceMappingURL=94.e024259d.chunk.js.map